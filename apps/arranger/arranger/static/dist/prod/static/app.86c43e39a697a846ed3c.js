!function(g){function I(I){for(var n,C,A=I[0],r=I[1],B=I[2],l=0,b=[];l<A.length;l++)C=A[l],Object.prototype.hasOwnProperty.call(t,C)&&t[C]&&b.push(t[C][0]),t[C]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(g[n]=r[n]);for(a&&a(I);b.length;)b.shift()();return c.push.apply(c,B||[]),e()}function e(){for(var g,I=0;I<c.length;I++){for(var e=c[I],n=!0,A=1;A<e.length;A++){var r=e[A];0!==t[r]&&(n=!1)}n&&(c.splice(I--,1),g=C(C.s=e[0]))}return g}var n={},t={0:0},c=[];function C(I){if(n[I])return n[I].exports;var e=n[I]={i:I,l:!1,exports:{}};return g[I].call(e.exports,e,e.exports,C),e.l=!0,e.exports}C.m=g,C.c=n,C.d=function(g,I,e){C.o(g,I)||Object.defineProperty(g,I,{enumerable:!0,get:e})},C.r=function(g){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},C.t=function(g,I){if(1&I&&(g=C(g)),8&I)return g;if(4&I&&"object"==typeof g&&g&&g.__esModule)return g;var e=Object.create(null);if(C.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:g}),2&I&&"string"!=typeof g)for(var n in g)C.d(e,n,function(I){return g[I]}.bind(null,n));return e},C.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return C.d(I,"a",I),I},C.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},C.p="/static";var A=window.webpackJsonp=window.webpackJsonp||[],r=A.push.bind(A);A.push=I,A=A.slice();for(var B=0;B<A.length;B++)I(A[B]);var a=r;c.push([198,1]),e()}({195:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(React) {/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(25);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(57);\n/* harmony import */ var _parts_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(196);\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\nfunction getPos(el) {\n  for (var lx = 0, ly = 0; el != null; lx += el.offsetLeft, ly += el.offsetTop, el = el.offsetParent) {\n    ;\n  }\n\n  return {\n    x: lx,\n    y: ly\n  };\n}\n\nfunction x_y_for_evt(evt, offset) {\n  var s_x, s_y;\n\n  if (evt.clientX === undefined) {\n    s_x = evt.changedTouches[0].clientX - offset.x;\n    s_y = evt.changedTouches[0].clientY - offset.y;\n  } else {\n    s_x = evt.clientX - offset.x;\n    s_y = evt.clientY - offset.y;\n  }\n\n  return [s_x, s_y];\n}\n\nfunction makeGrid(dimensions, zerosState) {\n  var pixelWidth = dimensions.pixelWidth,\n      height = dimensions.height,\n      width = dimensions.width;\n  var squareWidth = pixelWidth * 8;\n  var grid = [/*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Line"], {\n    key: "centerx0",\n    strokeWidth: 2,\n    stroke: "red",\n    points: [zerosState.zero_x, 0, zerosState.zero_x, height]\n  }), /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Line"], {\n    key: "centery0",\n    strokeWidth: 2,\n    stroke: "red",\n    points: [0, zerosState.zero_y, width, zerosState.zero_y]\n  })];\n\n  for (var i = zerosState.zero_x + squareWidth; i <= width + squareWidth * 2; i += squareWidth) {\n    if (i > 0) {\n      grid.push( /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Line"], {\n        key: "rcol" + i,\n        strokeWidth: 1,\n        stroke: "#868686",\n        points: [i, 0, i, height]\n      }));\n    }\n  }\n\n  for (var i = zerosState.zero_x - squareWidth; i >= -squareWidth * 2; i -= squareWidth) {\n    if (i < width) {\n      grid.push( /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Line"], {\n        key: "lcol" + i,\n        strokeWidth: 1,\n        stroke: "#868686",\n        points: [i, 0, i, height]\n      }));\n    }\n  }\n\n  for (var i = zerosState.zero_y + squareWidth; i <= height + squareWidth * 2; i += squareWidth) {\n    if (i > 0) {\n      grid.push( /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Line"], {\n        key: "trow" + i,\n        strokeWidth: 1,\n        stroke: "#868686",\n        points: [0, i, width, i]\n      }));\n    }\n  }\n\n  for (var i = zerosState.zero_y - squareWidth; i >= -squareWidth * 2; i -= squareWidth) {\n    if (i < height) {\n      grid.push( /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Line"], {\n        key: "bcol" + i,\n        strokeWidth: 1,\n        stroke: "#868686",\n        points: [0, i, width, i]\n      }));\n    }\n  }\n\n  return grid;\n}\n\n/* harmony default export */ __webpack_exports__["a"] = (function () {\n  var makeDimensions = function makeDimensions() {\n    var width = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    var height = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    var pixelWidth = Math.ceil(window.innerWidth / 40 / 8);\n    return {\n      width: width,\n      height: height,\n      pixelWidth: pixelWidth\n    };\n  };\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_0__["useState"])(makeDimensions()),\n      _useState2 = _slicedToArray(_useState, 2),\n      dimensions = _useState2[0],\n      setDimensions = _useState2[1];\n\n  var zeroReducer = function zeroReducer(state, action) {\n    var offset = getPos(action.e.target.getStage().attrs.container);\n\n    var _x_y_for_evt = x_y_for_evt(action.e.evt, offset),\n        _x_y_for_evt2 = _slicedToArray(_x_y_for_evt, 2),\n        s_x = _x_y_for_evt2[0],\n        s_y = _x_y_for_evt2[1];\n\n    switch (action.type) {\n      case "drag_grid_start":\n        return _objectSpread(_objectSpread({}, state), {}, {\n          grid_x: s_x,\n          grid_y: s_y,\n          start_offset: {\n            zero_x: state.zero_x,\n            zero_y: state.zero_y\n          }\n        });\n\n      case "drag_grid":\n        var diffx = state.grid_x - s_x;\n        var diffy = state.grid_y - s_y;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          zero_x: state.start_offset.zero_x - diffx,\n          zero_y: state.start_offset.zero_y - diffy\n        });\n\n      default:\n        throw new Error("Unknown event ".concat(action.type));\n    }\n  };\n\n  var width = dimensions.width;\n  var height = dimensions.height;\n  var zero_x = Math.floor(width / 2);\n  var zero_y = Math.floor(height / 2);\n\n  var _useReducer = Object(react__WEBPACK_IMPORTED_MODULE_0__["useReducer"])(zeroReducer, {\n    zero_x: zero_x,\n    zero_y: zero_y,\n    grid_x: 0,\n    grid_y: 0,\n    start_offset: {\n      zero_x: zero_x,\n      zero_y: zero_y\n    }\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      zerosState = _useReducer2[0],\n      dispatchZeros = _useReducer2[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__["useEffect"])(function () {\n    function handleResize() {\n      setDimensions(makeDimensions());\n    }\n\n    window.addEventListener("resize", handleResize);\n    return function () {\n      return window.removeEventListener("resize", handleResize);\n    };\n  }, []);\n  var zero_x = Math.floor(width / 2);\n  var zero_y = Math.floor(height / 2) - 100;\n  return /*#__PURE__*/React.createElement(react_redux__WEBPACK_IMPORTED_MODULE_2__[/* ReactReduxContext */ "b"].Consumer, null, function (_ref) {\n    var store = _ref.store;\n    return /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Stage"], {\n      width: width,\n      height: height,\n      fill: "red"\n    }, /*#__PURE__*/React.createElement(react_redux__WEBPACK_IMPORTED_MODULE_2__[/* Provider */ "a"], {\n      store: store\n    }, /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Layer"], null, /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Rect"], {\n      width: width,\n      height: height,\n      fill: "#e6e6e6",\n      draggable: true,\n      dragBoundFunc: function dragBoundFunc(_) {\n        return {\n          x: 0,\n          y: 0\n        };\n      },\n      onDragMove: function onDragMove(e) {\n        return dispatchZeros({\n          type: "drag_grid",\n          e: e\n        });\n      },\n      onDragStart: function onDragStart(e) {\n        return dispatchZeros({\n          type: "drag_grid_start",\n          e: e\n        });\n      }\n    })), /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__["Layer"], null, makeGrid(dimensions, zerosState)), /*#__PURE__*/React.createElement(_parts_js__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"], {\n      zero_x: zerosState.zero_x,\n      zero_y: zerosState.zero_y,\n      pixelWidth: dimensions.pixelWidth\n    })));\n  });\n});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(4)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvcGFnZS5qcz9mZmU1Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfVxuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZHVjZXIsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBMYXllciwgTGluZSwgUmVjdCwgU3RhZ2UgfSBmcm9tIFwicmVhY3Qta29udmFcIjtcbmltcG9ydCB7IFByb3ZpZGVyLCBSZWFjdFJlZHV4Q29udGV4dCB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuaW1wb3J0IFBhcnRzIGZyb20gXCIuL3BhcnRzLmpzXCI7XG5cbmZ1bmN0aW9uIGdldFBvcyhlbCkge1xuICBmb3IgKHZhciBseCA9IDAsIGx5ID0gMDsgZWwgIT0gbnVsbDsgbHggKz0gZWwub2Zmc2V0TGVmdCwgbHkgKz0gZWwub2Zmc2V0VG9wLCBlbCA9IGVsLm9mZnNldFBhcmVudCkge1xuICAgIDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgeDogbHgsXG4gICAgeTogbHlcbiAgfTtcbn1cblxuZnVuY3Rpb24geF95X2Zvcl9ldnQoZXZ0LCBvZmZzZXQpIHtcbiAgdmFyIHNfeCwgc195O1xuXG4gIGlmIChldnQuY2xpZW50WCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgc194ID0gZXZ0LmNoYW5nZWRUb3VjaGVzWzBdLmNsaWVudFggLSBvZmZzZXQueDtcbiAgICBzX3kgPSBldnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSAtIG9mZnNldC55O1xuICB9IGVsc2Uge1xuICAgIHNfeCA9IGV2dC5jbGllbnRYIC0gb2Zmc2V0Lng7XG4gICAgc195ID0gZXZ0LmNsaWVudFkgLSBvZmZzZXQueTtcbiAgfVxuXG4gIHJldHVybiBbc194LCBzX3ldO1xufVxuXG5mdW5jdGlvbiBtYWtlR3JpZChkaW1lbnNpb25zLCB6ZXJvc1N0YXRlKSB7XG4gIHZhciBwaXhlbFdpZHRoID0gZGltZW5zaW9ucy5waXhlbFdpZHRoLFxuICAgICAgaGVpZ2h0ID0gZGltZW5zaW9ucy5oZWlnaHQsXG4gICAgICB3aWR0aCA9IGRpbWVuc2lvbnMud2lkdGg7XG4gIHZhciBzcXVhcmVXaWR0aCA9IHBpeGVsV2lkdGggKiA4O1xuICB2YXIgZ3JpZCA9IFsvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMaW5lLCB7XG4gICAga2V5OiBcImNlbnRlcngwXCIsXG4gICAgc3Ryb2tlV2lkdGg6IDIsXG4gICAgc3Ryb2tlOiBcInJlZFwiLFxuICAgIHBvaW50czogW3plcm9zU3RhdGUuemVyb194LCAwLCB6ZXJvc1N0YXRlLnplcm9feCwgaGVpZ2h0XVxuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGluZSwge1xuICAgIGtleTogXCJjZW50ZXJ5MFwiLFxuICAgIHN0cm9rZVdpZHRoOiAyLFxuICAgIHN0cm9rZTogXCJyZWRcIixcbiAgICBwb2ludHM6IFswLCB6ZXJvc1N0YXRlLnplcm9feSwgd2lkdGgsIHplcm9zU3RhdGUuemVyb195XVxuICB9KV07XG5cbiAgZm9yICh2YXIgaSA9IHplcm9zU3RhdGUuemVyb194ICsgc3F1YXJlV2lkdGg7IGkgPD0gd2lkdGggKyBzcXVhcmVXaWR0aCAqIDI7IGkgKz0gc3F1YXJlV2lkdGgpIHtcbiAgICBpZiAoaSA+IDApIHtcbiAgICAgIGdyaWQucHVzaCggLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGluZSwge1xuICAgICAgICBrZXk6IFwicmNvbFwiICsgaSxcbiAgICAgICAgc3Ryb2tlV2lkdGg6IDEsXG4gICAgICAgIHN0cm9rZTogXCIjODY4Njg2XCIsXG4gICAgICAgIHBvaW50czogW2ksIDAsIGksIGhlaWdodF1cbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBpID0gemVyb3NTdGF0ZS56ZXJvX3ggLSBzcXVhcmVXaWR0aDsgaSA+PSAtc3F1YXJlV2lkdGggKiAyOyBpIC09IHNxdWFyZVdpZHRoKSB7XG4gICAgaWYgKGkgPCB3aWR0aCkge1xuICAgICAgZ3JpZC5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMaW5lLCB7XG4gICAgICAgIGtleTogXCJsY29sXCIgKyBpLFxuICAgICAgICBzdHJva2VXaWR0aDogMSxcbiAgICAgICAgc3Ryb2tlOiBcIiM4Njg2ODZcIixcbiAgICAgICAgcG9pbnRzOiBbaSwgMCwgaSwgaGVpZ2h0XVxuICAgICAgfSkpO1xuICAgIH1cbiAgfVxuXG4gIGZvciAodmFyIGkgPSB6ZXJvc1N0YXRlLnplcm9feSArIHNxdWFyZVdpZHRoOyBpIDw9IGhlaWdodCArIHNxdWFyZVdpZHRoICogMjsgaSArPSBzcXVhcmVXaWR0aCkge1xuICAgIGlmIChpID4gMCkge1xuICAgICAgZ3JpZC5wdXNoKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMaW5lLCB7XG4gICAgICAgIGtleTogXCJ0cm93XCIgKyBpLFxuICAgICAgICBzdHJva2VXaWR0aDogMSxcbiAgICAgICAgc3Ryb2tlOiBcIiM4Njg2ODZcIixcbiAgICAgICAgcG9pbnRzOiBbMCwgaSwgd2lkdGgsIGldXG4gICAgICB9KSk7XG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIgaSA9IHplcm9zU3RhdGUuemVyb195IC0gc3F1YXJlV2lkdGg7IGkgPj0gLXNxdWFyZVdpZHRoICogMjsgaSAtPSBzcXVhcmVXaWR0aCkge1xuICAgIGlmIChpIDwgaGVpZ2h0KSB7XG4gICAgICBncmlkLnB1c2goIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KExpbmUsIHtcbiAgICAgICAga2V5OiBcImJjb2xcIiArIGksXG4gICAgICAgIHN0cm9rZVdpZHRoOiAxLFxuICAgICAgICBzdHJva2U6IFwiIzg2ODY4NlwiLFxuICAgICAgICBwb2ludHM6IFswLCBpLCB3aWR0aCwgaV1cbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZ3JpZDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uICgpIHtcbiAgdmFyIG1ha2VEaW1lbnNpb25zID0gZnVuY3Rpb24gbWFrZURpbWVuc2lvbnMoKSB7XG4gICAgdmFyIHdpZHRoID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCB8fCAwKTtcbiAgICB2YXIgaGVpZ2h0ID0gTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCwgd2luZG93LmlubmVySGVpZ2h0IHx8IDApO1xuICAgIHZhciBwaXhlbFdpZHRoID0gTWF0aC5jZWlsKHdpbmRvdy5pbm5lcldpZHRoIC8gNDAgLyA4KTtcbiAgICByZXR1cm4ge1xuICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICBwaXhlbFdpZHRoOiBwaXhlbFdpZHRoXG4gICAgfTtcbiAgfTtcblxuICB2YXIgX3VzZVN0YXRlID0gdXNlU3RhdGUobWFrZURpbWVuc2lvbnMoKSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIGRpbWVuc2lvbnMgPSBfdXNlU3RhdGUyWzBdLFxuICAgICAgc2V0RGltZW5zaW9ucyA9IF91c2VTdGF0ZTJbMV07XG5cbiAgdmFyIHplcm9SZWR1Y2VyID0gZnVuY3Rpb24gemVyb1JlZHVjZXIoc3RhdGUsIGFjdGlvbikge1xuICAgIHZhciBvZmZzZXQgPSBnZXRQb3MoYWN0aW9uLmUudGFyZ2V0LmdldFN0YWdlKCkuYXR0cnMuY29udGFpbmVyKTtcblxuICAgIHZhciBfeF95X2Zvcl9ldnQgPSB4X3lfZm9yX2V2dChhY3Rpb24uZS5ldnQsIG9mZnNldCksXG4gICAgICAgIF94X3lfZm9yX2V2dDIgPSBfc2xpY2VkVG9BcnJheShfeF95X2Zvcl9ldnQsIDIpLFxuICAgICAgICBzX3ggPSBfeF95X2Zvcl9ldnQyWzBdLFxuICAgICAgICBzX3kgPSBfeF95X2Zvcl9ldnQyWzFdO1xuXG4gICAgc3dpdGNoIChhY3Rpb24udHlwZSkge1xuICAgICAgY2FzZSBcImRyYWdfZ3JpZF9zdGFydFwiOlxuICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCB7XG4gICAgICAgICAgZ3JpZF94OiBzX3gsXG4gICAgICAgICAgZ3JpZF95OiBzX3ksXG4gICAgICAgICAgc3RhcnRfb2Zmc2V0OiB7XG4gICAgICAgICAgICB6ZXJvX3g6IHN0YXRlLnplcm9feCxcbiAgICAgICAgICAgIHplcm9feTogc3RhdGUuemVyb195XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBcImRyYWdfZ3JpZFwiOlxuICAgICAgICB2YXIgZGlmZnggPSBzdGF0ZS5ncmlkX3ggLSBzX3g7XG4gICAgICAgIHZhciBkaWZmeSA9IHN0YXRlLmdyaWRfeSAtIHNfeTtcbiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICAgIHplcm9feDogc3RhdGUuc3RhcnRfb2Zmc2V0Lnplcm9feCAtIGRpZmZ4LFxuICAgICAgICAgIHplcm9feTogc3RhdGUuc3RhcnRfb2Zmc2V0Lnplcm9feSAtIGRpZmZ5XG4gICAgICAgIH0pO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGV2ZW50IFwiLmNvbmNhdChhY3Rpb24udHlwZSkpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgd2lkdGggPSBkaW1lbnNpb25zLndpZHRoO1xuICB2YXIgaGVpZ2h0ID0gZGltZW5zaW9ucy5oZWlnaHQ7XG4gIHZhciB6ZXJvX3ggPSBNYXRoLmZsb29yKHdpZHRoIC8gMik7XG4gIHZhciB6ZXJvX3kgPSBNYXRoLmZsb29yKGhlaWdodCAvIDIpO1xuXG4gIHZhciBfdXNlUmVkdWNlciA9IHVzZVJlZHVjZXIoemVyb1JlZHVjZXIsIHtcbiAgICB6ZXJvX3g6IHplcm9feCxcbiAgICB6ZXJvX3k6IHplcm9feSxcbiAgICBncmlkX3g6IDAsXG4gICAgZ3JpZF95OiAwLFxuICAgIHN0YXJ0X29mZnNldDoge1xuICAgICAgemVyb194OiB6ZXJvX3gsXG4gICAgICB6ZXJvX3k6IHplcm9feVxuICAgIH1cbiAgfSksXG4gICAgICBfdXNlUmVkdWNlcjIgPSBfc2xpY2VkVG9BcnJheShfdXNlUmVkdWNlciwgMiksXG4gICAgICB6ZXJvc1N0YXRlID0gX3VzZVJlZHVjZXIyWzBdLFxuICAgICAgZGlzcGF0Y2haZXJvcyA9IF91c2VSZWR1Y2VyMlsxXTtcblxuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGhhbmRsZVJlc2l6ZSgpIHtcbiAgICAgIHNldERpbWVuc2lvbnMobWFrZURpbWVuc2lvbnMoKSk7XG4gICAgfVxuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgaGFuZGxlUmVzaXplKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIGhhbmRsZVJlc2l6ZSk7XG4gICAgfTtcbiAgfSwgW10pO1xuICB2YXIgemVyb194ID0gTWF0aC5mbG9vcih3aWR0aCAvIDIpO1xuICB2YXIgemVyb195ID0gTWF0aC5mbG9vcihoZWlnaHQgLyAyKSAtIDEwMDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlYWN0UmVkdXhDb250ZXh0LkNvbnN1bWVyLCBudWxsLCBmdW5jdGlvbiAoX3JlZikge1xuICAgIHZhciBzdG9yZSA9IF9yZWYuc3RvcmU7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFN0YWdlLCB7XG4gICAgICB3aWR0aDogd2lkdGgsXG4gICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgIGZpbGw6IFwicmVkXCJcbiAgICB9LCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQcm92aWRlciwge1xuICAgICAgc3RvcmU6IHN0b3JlXG4gICAgfSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGF5ZXIsIG51bGwsIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlY3QsIHtcbiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgZmlsbDogXCIjZTZlNmU2XCIsXG4gICAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgICBkcmFnQm91bmRGdW5jOiBmdW5jdGlvbiBkcmFnQm91bmRGdW5jKF8pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiAwLFxuICAgICAgICAgIHk6IDBcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBvbkRyYWdNb3ZlOiBmdW5jdGlvbiBvbkRyYWdNb3ZlKGUpIHtcbiAgICAgICAgcmV0dXJuIGRpc3BhdGNoWmVyb3Moe1xuICAgICAgICAgIHR5cGU6IFwiZHJhZ19ncmlkXCIsXG4gICAgICAgICAgZTogZVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBvbkRyYWdTdGFydDogZnVuY3Rpb24gb25EcmFnU3RhcnQoZSkge1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2haZXJvcyh7XG4gICAgICAgICAgdHlwZTogXCJkcmFnX2dyaWRfc3RhcnRcIixcbiAgICAgICAgICBlOiBlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGF5ZXIsIG51bGwsIG1ha2VHcmlkKGRpbWVuc2lvbnMsIHplcm9zU3RhdGUpKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoUGFydHMsIHtcbiAgICAgIHplcm9feDogemVyb3NTdGF0ZS56ZXJvX3gsXG4gICAgICB6ZXJvX3k6IHplcm9zU3RhdGUuemVyb195LFxuICAgICAgcGl4ZWxXaWR0aDogZGltZW5zaW9ucy5waXhlbFdpZHRoXG4gICAgfSkpKTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///195\n')},196:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* WEBPACK VAR INJECTION */(function(React) {/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(25);\n/* harmony import */ var react_konva__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_konva__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(57);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _state_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(64);\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\n\n\n\n\n\nvar PartPixels = function PartPixels(_ref) {\n  var part = _ref.part,\n      pixelWidth = _ref.pixelWidth,\n      lineWidth = _ref.lineWidth;\n\n  var x = function x(col) {\n    return col * pixelWidth;\n  };\n\n  var y = function y(row) {\n    return row * pixelWidth;\n  };\n\n  return /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_0__["Group"], null, part.pixels.map(function (pixel) {\n    return /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_0__["Rect"], {\n      key: pixel.key,\n      width: pixelWidth,\n      height: pixelWidth,\n      x: x(pixel.col),\n      y: y(pixel.row),\n      fill: pixel.color\n    });\n  }), /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_0__["Line"], {\n    stroke: "white",\n    strokeWidth: lineWidth,\n    points: [x(0), y(0), x(part.width), y(0), x(part.width), y(part.height), x(0), y(part.height), x(0), y(0)]\n  }));\n};\n\nvar Part = function Part(_ref2) {\n  var part = _ref2.part,\n      zero_x = _ref2.zero_x,\n      zero_y = _ref2.zero_y,\n      pixelWidth = _ref2.pixelWidth,\n      partWidth = _ref2.partWidth;\n  var dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useDispatch */ "c"])();\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__["useState"])({\n    x: 0,\n    y: 0\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      position = _useState2[0],\n      setPosition = _useState2[1];\n\n  var start_x = zero_x + part.user_x * pixelWidth;\n  var start_y = zero_y - part.user_y * pixelWidth;\n  var lineWidth = Math.max(Math.floor(pixelWidth / 2), 1);\n\n  var onDragEnd = function onDragEnd() {\n    var user_x = (position.x - zero_x) / pixelWidth;\n    var user_y = (zero_y - position.y) / pixelWidth;\n    dispatch(_state_js__WEBPACK_IMPORTED_MODULE_3__[/* PartState */ "a"].ChangePosition({\n      serial: part.serial,\n      part_number: part.part_number,\n      user_x: user_x,\n      user_y: user_y\n    }));\n  };\n\n  var dragBound = function dragBound(pos) {\n    var newpos = {\n      x: pos.x - (pos.x - zero_x) % pixelWidth,\n      y: pos.y - (pos.y - zero_y) % pixelWidth\n    };\n    setPosition(newpos);\n    return newpos;\n  };\n\n  return /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_0__["Group"], {\n    x: start_x,\n    y: start_y,\n    draggable: true,\n    onDragEnd: onDragEnd,\n    dragBoundFunc: dragBound,\n    onClick: function onClick() {\n      return dispatch(_state_js__WEBPACK_IMPORTED_MODULE_3__[/* PartState */ "a"].Highlight(part.serial, part.part_number));\n    },\n    onTap: function onTap() {\n      return dispatch(_state_js__WEBPACK_IMPORTED_MODULE_3__[/* PartState */ "a"].Highlight(part.serial, part.part_number));\n    }\n  }, /*#__PURE__*/React.createElement(PartPixels, {\n    serial: part.serial,\n    part: part,\n    pixelWidth: pixelWidth,\n    lineWidth: lineWidth,\n    partWidth: partWidth\n  }));\n};\n\n/* harmony default export */ __webpack_exports__["a"] = (function (props) {\n  var parts = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useSelector */ "d"])(function (state) {\n    return state.parts.parts;\n  });\n  return /*#__PURE__*/React.createElement(react_konva__WEBPACK_IMPORTED_MODULE_0__["Layer"], null, parts.map(function (part) {\n    return /*#__PURE__*/React.createElement(Part, _extends({\n      key: part.key,\n      part: part\n    }, props));\n  }));\n});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(4)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvcGFydHMuanM/YmQ1NyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHsgcmV0dXJuIF9hcnJheVdpdGhIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXlMaW1pdChhcnIsIGkpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IF9ub25JdGVyYWJsZVJlc3QoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVSZXN0KCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxuZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgeyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkpIHJldHVybjsgdmFyIF9hcnIgPSBbXTsgdmFyIF9uID0gdHJ1ZTsgdmFyIF9kID0gZmFsc2U7IHZhciBfZSA9IHVuZGVmaW5lZDsgdHJ5IHsgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkgeyBfYXJyLnB1c2goX3MudmFsdWUpOyBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7IH0gfSBjYXRjaCAoZXJyKSB7IF9kID0gdHJ1ZTsgX2UgPSBlcnI7IH0gZmluYWxseSB7IHRyeSB7IGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0gIT0gbnVsbCkgX2lbXCJyZXR1cm5cIl0oKTsgfSBmaW5hbGx5IHsgaWYgKF9kKSB0aHJvdyBfZTsgfSB9IHJldHVybiBfYXJyOyB9XG5cbmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjsgfVxuXG5pbXBvcnQgeyBMYXllciwgR3JvdXAsIFJlY3QsIExpbmUgfSBmcm9tIFwicmVhY3Qta29udmFcIjtcbmltcG9ydCB7IHVzZURpc3BhdGNoLCB1c2VTZWxlY3RvciB9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IFBhcnRTdGF0ZSB9IGZyb20gXCIuL3N0YXRlLmpzXCI7XG5cbnZhciBQYXJ0UGl4ZWxzID0gZnVuY3Rpb24gUGFydFBpeGVscyhfcmVmKSB7XG4gIHZhciBwYXJ0ID0gX3JlZi5wYXJ0LFxuICAgICAgcGl4ZWxXaWR0aCA9IF9yZWYucGl4ZWxXaWR0aCxcbiAgICAgIGxpbmVXaWR0aCA9IF9yZWYubGluZVdpZHRoO1xuXG4gIHZhciB4ID0gZnVuY3Rpb24geChjb2wpIHtcbiAgICByZXR1cm4gY29sICogcGl4ZWxXaWR0aDtcbiAgfTtcblxuICB2YXIgeSA9IGZ1bmN0aW9uIHkocm93KSB7XG4gICAgcmV0dXJuIHJvdyAqIHBpeGVsV2lkdGg7XG4gIH07XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KEdyb3VwLCBudWxsLCBwYXJ0LnBpeGVscy5tYXAoZnVuY3Rpb24gKHBpeGVsKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFJlY3QsIHtcbiAgICAgIGtleTogcGl4ZWwua2V5LFxuICAgICAgd2lkdGg6IHBpeGVsV2lkdGgsXG4gICAgICBoZWlnaHQ6IHBpeGVsV2lkdGgsXG4gICAgICB4OiB4KHBpeGVsLmNvbCksXG4gICAgICB5OiB5KHBpeGVsLnJvdyksXG4gICAgICBmaWxsOiBwaXhlbC5jb2xvclxuICAgIH0pO1xuICB9KSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoTGluZSwge1xuICAgIHN0cm9rZTogXCJ3aGl0ZVwiLFxuICAgIHN0cm9rZVdpZHRoOiBsaW5lV2lkdGgsXG4gICAgcG9pbnRzOiBbeCgwKSwgeSgwKSwgeChwYXJ0LndpZHRoKSwgeSgwKSwgeChwYXJ0LndpZHRoKSwgeShwYXJ0LmhlaWdodCksIHgoMCksIHkocGFydC5oZWlnaHQpLCB4KDApLCB5KDApXVxuICB9KSk7XG59O1xuXG52YXIgUGFydCA9IGZ1bmN0aW9uIFBhcnQoX3JlZjIpIHtcbiAgdmFyIHBhcnQgPSBfcmVmMi5wYXJ0LFxuICAgICAgemVyb194ID0gX3JlZjIuemVyb194LFxuICAgICAgemVyb195ID0gX3JlZjIuemVyb195LFxuICAgICAgcGl4ZWxXaWR0aCA9IF9yZWYyLnBpeGVsV2lkdGgsXG4gICAgICBwYXJ0V2lkdGggPSBfcmVmMi5wYXJ0V2lkdGg7XG4gIHZhciBkaXNwYXRjaCA9IHVzZURpc3BhdGNoKCk7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKHtcbiAgICB4OiAwLFxuICAgIHk6IDBcbiAgfSksXG4gICAgICBfdXNlU3RhdGUyID0gX3NsaWNlZFRvQXJyYXkoX3VzZVN0YXRlLCAyKSxcbiAgICAgIHBvc2l0aW9uID0gX3VzZVN0YXRlMlswXSxcbiAgICAgIHNldFBvc2l0aW9uID0gX3VzZVN0YXRlMlsxXTtcblxuICB2YXIgc3RhcnRfeCA9IHplcm9feCArIHBhcnQudXNlcl94ICogcGl4ZWxXaWR0aDtcbiAgdmFyIHN0YXJ0X3kgPSB6ZXJvX3kgLSBwYXJ0LnVzZXJfeSAqIHBpeGVsV2lkdGg7XG4gIHZhciBsaW5lV2lkdGggPSBNYXRoLm1heChNYXRoLmZsb29yKHBpeGVsV2lkdGggLyAyKSwgMSk7XG5cbiAgdmFyIG9uRHJhZ0VuZCA9IGZ1bmN0aW9uIG9uRHJhZ0VuZCgpIHtcbiAgICB2YXIgdXNlcl94ID0gKHBvc2l0aW9uLnggLSB6ZXJvX3gpIC8gcGl4ZWxXaWR0aDtcbiAgICB2YXIgdXNlcl95ID0gKHplcm9feSAtIHBvc2l0aW9uLnkpIC8gcGl4ZWxXaWR0aDtcbiAgICBkaXNwYXRjaChQYXJ0U3RhdGUuQ2hhbmdlUG9zaXRpb24oe1xuICAgICAgc2VyaWFsOiBwYXJ0LnNlcmlhbCxcbiAgICAgIHBhcnRfbnVtYmVyOiBwYXJ0LnBhcnRfbnVtYmVyLFxuICAgICAgdXNlcl94OiB1c2VyX3gsXG4gICAgICB1c2VyX3k6IHVzZXJfeVxuICAgIH0pKTtcbiAgfTtcblxuICB2YXIgZHJhZ0JvdW5kID0gZnVuY3Rpb24gZHJhZ0JvdW5kKHBvcykge1xuICAgIHZhciBuZXdwb3MgPSB7XG4gICAgICB4OiBwb3MueCAtIChwb3MueCAtIHplcm9feCkgJSBwaXhlbFdpZHRoLFxuICAgICAgeTogcG9zLnkgLSAocG9zLnkgLSB6ZXJvX3kpICUgcGl4ZWxXaWR0aFxuICAgIH07XG4gICAgc2V0UG9zaXRpb24obmV3cG9zKTtcbiAgICByZXR1cm4gbmV3cG9zO1xuICB9O1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChHcm91cCwge1xuICAgIHg6IHN0YXJ0X3gsXG4gICAgeTogc3RhcnRfeSxcbiAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgb25EcmFnRW5kOiBvbkRyYWdFbmQsXG4gICAgZHJhZ0JvdW5kRnVuYzogZHJhZ0JvdW5kLFxuICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soKSB7XG4gICAgICByZXR1cm4gZGlzcGF0Y2goUGFydFN0YXRlLkhpZ2hsaWdodChwYXJ0LnNlcmlhbCwgcGFydC5wYXJ0X251bWJlcikpO1xuICAgIH0sXG4gICAgb25UYXA6IGZ1bmN0aW9uIG9uVGFwKCkge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoKFBhcnRTdGF0ZS5IaWdobGlnaHQocGFydC5zZXJpYWwsIHBhcnQucGFydF9udW1iZXIpKTtcbiAgICB9XG4gIH0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBhcnRQaXhlbHMsIHtcbiAgICBzZXJpYWw6IHBhcnQuc2VyaWFsLFxuICAgIHBhcnQ6IHBhcnQsXG4gICAgcGl4ZWxXaWR0aDogcGl4ZWxXaWR0aCxcbiAgICBsaW5lV2lkdGg6IGxpbmVXaWR0aCxcbiAgICBwYXJ0V2lkdGg6IHBhcnRXaWR0aFxuICB9KSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCAoZnVuY3Rpb24gKHByb3BzKSB7XG4gIHZhciBwYXJ0cyA9IHVzZVNlbGVjdG9yKGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgIHJldHVybiBzdGF0ZS5wYXJ0cy5wYXJ0cztcbiAgfSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChMYXllciwgbnVsbCwgcGFydHMubWFwKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBhcnQsIF9leHRlbmRzKHtcbiAgICAgIGtleTogcGFydC5rZXksXG4gICAgICBwYXJ0OiBwYXJ0XG4gICAgfSwgcHJvcHMpKTtcbiAgfSkpO1xufSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///196\n')},198:function(g,I,e){g.exports=e(478)},46:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return WSState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return WSCommand; });\n/* unused harmony export getWSCommands */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return listen; });\n/* harmony import */ var redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var redux_act__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23);\n/* harmony import */ var redux_saga__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(58);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(479);\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar _marked = /*#__PURE__*/regeneratorRuntime.mark(maybeTimeoutMessage),\n    _marked2 = /*#__PURE__*/regeneratorRuntime.mark(sendToSocket),\n    _marked3 = /*#__PURE__*/regeneratorRuntime.mark(tickMessages),\n    _marked4 = /*#__PURE__*/regeneratorRuntime.mark(startWS),\n    _marked5 = /*#__PURE__*/regeneratorRuntime.mark(processWsSend),\n    _marked6 = /*#__PURE__*/regeneratorRuntime.mark(processWsReceive),\n    _marked7 = /*#__PURE__*/regeneratorRuntime.mark(getWSCommands),\n    _marked8 = /*#__PURE__*/regeneratorRuntime.mark(listen);\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\nvar WSStateKls = /*#__PURE__*/function () {\n  function WSStateKls() {\n    _classCallCheck(this, WSStateKls);\n\n    this.Loading = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Starting to open connection");\n    this.Error = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Got an error connecting to the websocket");\n    this.Connected = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Successfully connected to the websocket");\n    this.ServerTime = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Got a new server time from the server", function (time) {\n      return {\n        time: time\n      };\n    });\n  }\n\n  _createClass(WSStateKls, [{\n    key: "disabledSelector",\n    value: function disabledSelector(state) {\n      return state.ws.loading || state.ws.error;\n    }\n  }, {\n    key: "reducer",\n    value: function reducer() {\n      var _createReducer;\n\n      return Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createReducer */ "b"])((_createReducer = {}, _defineProperty(_createReducer, this.Loading, function (state, payload) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          loading: true\n        });\n      }), _defineProperty(_createReducer, this.Error, function (state, _ref) {\n        var error = _ref.error;\n        var errorStr = "Unknown error";\n\n        try {\n          errorStr = "".concat(error.error_code, ": ").concat(error.error);\n        } catch (e) {\n          try {\n            errorStr = JSON.stringify(error);\n          } catch (e) {\n            try {\n              errorStr = error.toString();\n            } catch (e) {\n              errorStr = String(error);\n            }\n          }\n        }\n\n        return _objectSpread(_objectSpread({}, state), {}, {\n          error: error,\n          errorStr: errorStr,\n          loading: true\n        });\n      }), _defineProperty(_createReducer, this.Connected, function (state, payload) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          error: undefined,\n          errorStr: undefined,\n          loading: false\n        });\n      }), _createReducer), {\n        error: undefined,\n        errorStr: undefined,\n        devices: {},\n        loading: true\n      });\n    }\n  }]);\n\n  return WSStateKls;\n}();\n\nvar WSState = new WSStateKls();\nvar WSCommand = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Command to the websocket server", function (path, body, _ref2) {\n  var onreply = _ref2.onreply,\n      onerror = _ref2.onerror,\n      onprogress = _ref2.onprogress,\n      timeout = _ref2.timeout,\n      original = _ref2.original,\n      parentMessageIds = _ref2.parentMessageIds;\n  return {\n    path: path,\n    body: body,\n    onreply: onreply,\n    onerror: onerror,\n    onprogress: onprogress,\n    timeout: timeout,\n    original: original,\n    parentMessageIds: parentMessageIds\n  };\n});\n\nfunction maybeTimeoutMessage(actions, messageId) {\n  var action, response;\n  return regeneratorRuntime.wrap(function maybeTimeoutMessage$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          action = actions[messageId];\n          _context.next = 3;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* delay */ "d"])(action.timeout || 5000);\n\n        case 3:\n          _context.prev = 3;\n          response = action.onerror({\n            error: "Timedout waiting for a reply to the message",\n            error_code: "Timedout"\n          });\n\n        case 5:\n          _context.prev = 5;\n\n          if (!response) {\n            _context.next = 10;\n            break;\n          }\n\n          _context.next = 9;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(response);\n\n        case 9:\n          delete actions[messageId];\n\n        case 10:\n          return _context.finish(5);\n\n        case 11:\n        case "end":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[3,, 5, 11]]);\n}\n\nfunction sendToSocket(socket, sendch, actions) {\n  var action, response;\n  return regeneratorRuntime.wrap(function sendToSocket$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (false) {}\n\n          _context2.next = 3;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* take */ "j"])(sendch);\n\n        case 3:\n          action = _context2.sent;\n\n          if (!(socket.readyState === 1)) {\n            _context2.next = 8;\n            break;\n          }\n\n          socket.send(JSON.stringify(action.data));\n          _context2.next = 16;\n          break;\n\n        case 8:\n          _context2.prev = 8;\n          response = action.onerror({\n            error: "Connection to the server wasn\'t active",\n            error_code: "InactiveConnection"\n          });\n\n        case 10:\n          _context2.prev = 10;\n\n          if (!response) {\n            _context2.next = 15;\n            break;\n          }\n\n          _context2.next = 14;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(response);\n\n        case 14:\n          delete actions[action.messageId];\n\n        case 15:\n          return _context2.finish(10);\n\n        case 16:\n          _context2.next = 0;\n          break;\n\n        case 18:\n        case "end":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[8,, 10, 16]]);\n}\n\nfunction tickMessages(socket) {\n  return regeneratorRuntime.wrap(function tickMessages$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          if (false) {}\n\n          _context3.next = 3;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* delay */ "d"])(15000);\n\n        case 3:\n          if (socket.readyState === 1) {\n            socket.send(JSON.stringify({\n              path: "__tick__"\n            }));\n          }\n\n          _context3.next = 0;\n          break;\n\n        case 6:\n        case "end":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n\nfunction startWS(url, count, sendch, receivech, actions) {\n  var socket, onerrors, oncloses, ws, start, _yield$race, timeout, w, diff, waiter, ticker, sender;\n\n  return regeneratorRuntime.wrap(function startWS$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          socket = new WebSocket(url);\n          onerrors = [];\n          oncloses = [];\n          ws = new Promise(function (resolve, reject) {\n            socket.onopen = function () {\n              resolve(socket);\n            };\n\n            socket.onmessage = function (event) {\n              return receivech.put(event);\n            };\n\n            socket.onerror = function (evt) {\n              console.error("Websocket got error", evt);\n              reject(evt);\n            };\n\n            socket.onclose = function (evt) {\n              console.error("Websocket closed", evt);\n              reject(evt);\n              oncloses.map(function (cb) {\n                try {\n                  cb(evt);\n                } catch (e) {\n                  console.error(e);\n                }\n              });\n            };\n          });\n          start = Date.now();\n          _context4.prev = 5;\n          _context4.next = 8;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* race */ "g"])({\n            timeout: Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* delay */ "d"])(2000),\n            w: ws\n          });\n\n        case 8:\n          _yield$race = _context4.sent;\n          timeout = _yield$race.timeout;\n          w = _yield$race.w;\n          _context4.next = 23;\n          break;\n\n        case 13:\n          _context4.prev = 13;\n          _context4.t0 = _context4["catch"](5);\n          console.error("Failed to start websocket connection", _context4.t0);\n          _context4.next = 18;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(WSState.Error({\n            error: {\n              error: "Could not connect to server",\n              error_code: "FailedToConnected"\n            }\n          }));\n\n        case 18:\n          diff = Date.now() - start;\n\n          if (!(diff < 1000)) {\n            _context4.next = 22;\n            break;\n          }\n\n          _context4.next = 22;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* delay */ "d"])(1000 - diff);\n\n        case 22:\n          return _context4.abrupt("return");\n\n        case 23:\n          if (!timeout) {\n            _context4.next = 27;\n            break;\n          }\n\n          console.error("timed out waiting for websocket");\n          socket.close();\n          return _context4.abrupt("return", false);\n\n        case 27:\n          _context4.next = 29;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* call */ "b"])(redux_saga__WEBPACK_IMPORTED_MODULE_2__[/* channel */ "b"]);\n\n        case 29:\n          waiter = _context4.sent;\n          _context4.next = 32;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* fork */ "e"])(tickMessages, w);\n\n        case 32:\n          ticker = _context4.sent;\n          _context4.next = 35;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* fork */ "e"])(sendToSocket, w, sendch, actions);\n\n        case 35:\n          sender = _context4.sent;\n          oncloses.push(function () {\n            waiter.put(redux_saga__WEBPACK_IMPORTED_MODULE_2__[/* END */ "a"]);\n          });\n          _context4.prev = 37;\n          _context4.next = 40;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(WSState.Connected());\n\n        case 40:\n          _context4.next = 42;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* take */ "j"])(waiter);\n\n        case 42:\n          _context4.prev = 42;\n          _context4.next = 45;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(WSState.Error({\n            error: {\n              error: "Server went away",\n              error_code: "ServerWentAway"\n            }\n          }));\n\n        case 45:\n          waiter.close();\n          _context4.next = 48;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* cancel */ "c"])(ticker);\n\n        case 48:\n          _context4.next = 50;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* cancel */ "c"])(sender);\n\n        case 50:\n          return _context4.finish(42);\n\n        case 51:\n        case "end":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[5, 13], [37,, 42, 51]]);\n}\n\nfunction processWsSend(commandch, sendch, actions, defaultonerror) {\n  var normalise, _yield$take, payload, messageId, normalised;\n\n  return regeneratorRuntime.wrap(function processWsSend$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          normalise = function normalise(messageId, _ref3) {\n            var path = _ref3.path,\n                body = _ref3.body,\n                onerror = _ref3.onerror,\n                onreply = _ref3.onreply,\n                onprogress = _ref3.onprogress,\n                original = _ref3.original,\n                timeout = _ref3.timeout;\n            var done = false;\n\n            var create = function create(cb, msg) {\n              try {\n                return cb(msg);\n              } catch (e) {\n                console.error(e);\n\n                try {\n                  return defaultonerror({\n                    error_code: "INTERNAL_ERROR",\n                    error: e.toString()\n                  });\n                } catch (e2) {\n                  console.error(e2);\n                }\n              }\n            };\n\n            var data = {\n              path: path,\n              body: body,\n              message_id: messageId\n            };\n\n            var doerror = function doerror(error) {\n              if (done) {\n                return;\n              }\n\n              done = true;\n\n              if (onerror) {\n                return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(create(onerror, _objectSpread(_objectSpread({}, error), {}, {\n                  messageId: messageId,\n                  original: original\n                })));\n              }\n            };\n\n            var doreply = function doreply(data, msgid) {\n              if (done || !data) {\n                return;\n              }\n\n              done = true;\n              var payloads = [];\n\n              if (data.error_code && onerror) {\n                payloads.push(Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(create(onerror, _objectSpread(_objectSpread({}, data), {}, {\n                  namespace: "",\n                  messageId: messageId,\n                  original: original\n                }))));\n              } else if (data.error && onerror) {\n                payloads.push(Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(create(onerror, _objectSpread(_objectSpread({}, data.error.msg), {}, {\n                  namespace: data.error.namespace,\n                  messageId: messageId,\n                  original: original\n                }))));\n              }\n\n              if (data.result && onreply) {\n                payloads.push(Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(create(onreply, {\n                  messageId: messageId,\n                  data: data.result,\n                  original: original\n                })));\n              }\n\n              return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* all */ "a"])(payloads);\n            };\n\n            var doprogress = function doprogress(progress) {\n              if (onprogress) {\n                return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(create(onprogress, {\n                  messageId: messageId,\n                  progress: progress,\n                  original: original\n                }));\n              }\n            };\n\n            return {\n              data: data,\n              messageId: messageId,\n              timeout: timeout,\n              onreply: doreply,\n              onerror: doerror,\n              onprogress: doprogress\n            };\n          };\n\n        case 1:\n          if (false) {}\n\n          _context5.next = 4;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* take */ "j"])(commandch);\n\n        case 4:\n          _yield$take = _context5.sent;\n          payload = _yield$take.payload;\n          messageId = Object(uuid__WEBPACK_IMPORTED_MODULE_3__[/* default */ "a"])();\n\n          if (payload.parentMessageIds) {\n            messageId = [].concat(_toConsumableArray(payload.parentMessageIds), [messageId]);\n          }\n\n          normalised = normalise(messageId, payload);\n          actions[messageId] = normalised;\n          _context5.next = 12;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* spawn */ "i"])(maybeTimeoutMessage, actions, messageId);\n\n        case 12:\n          normalised.timeouter = _context5.sent;\n          _context5.next = 15;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(sendch, normalised);\n\n        case 15:\n          _context5.next = 1;\n          break;\n\n        case 17:\n        case "end":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n\nfunction processWsReceive(receivech, actions) {\n  var makeResponse, _yield$take2, data, action, response;\n\n  return regeneratorRuntime.wrap(function processWsReceive$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          makeResponse = function makeResponse(action, data) {\n            if (data.reply) {\n              if (data.reply.progress) {\n                return action.onprogress(data.reply.progress);\n              } else {\n                return action.onreply(data.reply, data.message_id);\n              }\n            }\n\n            if (data.error) {\n              return action.onerror(data.error);\n            }\n          };\n\n        case 1:\n          if (false) {}\n\n          _context6.next = 4;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* take */ "j"])(receivech);\n\n        case 4:\n          _yield$take2 = _context6.sent;\n          data = _yield$take2.data;\n          _context6.prev = 6;\n          data = JSON.parse(data);\n          _context6.next = 14;\n          break;\n\n        case 10:\n          _context6.prev = 10;\n          _context6.t0 = _context6["catch"](6);\n          console.error("failed to parse json from the server", _context6.t0);\n          return _context6.abrupt("continue", 1);\n\n        case 14:\n          if (data.message_id) {\n            _context6.next = 17;\n            break;\n          }\n\n          console.error("Got a message from the server without a message id", data);\n          return _context6.abrupt("continue", 1);\n\n        case 17:\n          if (!(data.message_id == "__tick__")) {\n            _context6.next = 19;\n            break;\n          }\n\n          return _context6.abrupt("continue", 1);\n\n        case 19:\n          if (!(data.message_id == "__server_time__")) {\n            _context6.next = 23;\n            break;\n          }\n\n          _context6.next = 22;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(WSState.ServerTime(data.reply));\n\n        case 22:\n          return _context6.abrupt("continue", 1);\n\n        case 23:\n          action = actions[data.message_id];\n\n          if (action) {\n            _context6.next = 27;\n            break;\n          }\n\n          console.error("Got a message from the server with unknown message id", data.message_id, data);\n          return _context6.abrupt("continue", 1);\n\n        case 27:\n          if (!action.timeouter) {\n            _context6.next = 30;\n            break;\n          }\n\n          _context6.next = 30;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* cancel */ "c"])(action.timeouter);\n\n        case 30:\n          response = undefined;\n          _context6.prev = 31;\n          response = makeResponse(action, data);\n\n        case 33:\n          _context6.prev = 33;\n\n          if (!response) {\n            _context6.next = 37;\n            break;\n          }\n\n          _context6.next = 37;\n          return response;\n\n        case 37:\n          return _context6.finish(33);\n\n        case 38:\n          // Finished with this message if not a progress message\n          if (response && (!data.reply || !data.reply.progress)) {\n            delete actions[data.message_id];\n          }\n\n          _context6.next = 1;\n          break;\n\n        case 41:\n        case "end":\n          return _context6.stop();\n      }\n    }\n  }, _marked6, null, [[6, 10], [31,, 33, 38]]);\n}\n\nfunction getWSCommands(commandch) {\n  var nxt;\n  return regeneratorRuntime.wrap(function getWSCommands$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          if (false) {}\n\n          _context7.next = 3;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* take */ "j"])(WSCommand);\n\n        case 3:\n          nxt = _context7.sent;\n          _context7.next = 6;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(commandch, nxt);\n\n        case 6:\n          _context7.next = 0;\n          break;\n\n        case 8:\n        case "end":\n          return _context7.stop();\n      }\n    }\n  }, _marked7);\n}\nfunction listen(url, defaultonerror, delayMS) {\n  var count, messages, sendch, receivech, commandch, actions, sendprocess, receiveprocess, ids, i, action, response;\n  return regeneratorRuntime.wrap(function listen$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          count = 0;\n          messages = {};\n          _context8.next = 4;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* call */ "b"])(redux_saga__WEBPACK_IMPORTED_MODULE_2__[/* channel */ "b"]);\n\n        case 4:\n          sendch = _context8.sent;\n          _context8.next = 7;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* call */ "b"])(redux_saga__WEBPACK_IMPORTED_MODULE_2__[/* channel */ "b"]);\n\n        case 7:\n          receivech = _context8.sent;\n          _context8.next = 10;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* call */ "b"])(redux_saga__WEBPACK_IMPORTED_MODULE_2__[/* channel */ "b"]);\n\n        case 10:\n          commandch = _context8.sent;\n\n          if (defaultonerror === undefined) {\n            defaultonerror = function defaultonerror(e) {\n              return console.error(e);\n            };\n          } // This is outside the while true so that we don\'t miss messages\n          // when the server goes away and before we\'ve started processWsSend again\n\n\n          _context8.next = 14;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* fork */ "e"])(getWSCommands, commandch);\n\n        case 14:\n          if (false) {}\n\n          _context8.next = 17;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(WSState.Loading());\n\n        case 17:\n          count += 1;\n          actions = {};\n          messages[count] = actions;\n          _context8.next = 22;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* fork */ "e"])(processWsSend, commandch, sendch, actions, defaultonerror);\n\n        case 22:\n          sendprocess = _context8.sent;\n          _context8.next = 25;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* fork */ "e"])(processWsReceive, receivech, actions);\n\n        case 25:\n          receiveprocess = _context8.sent;\n          _context8.next = 28;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* call */ "b"])(startWS, url, count, sendch, receivech, actions);\n\n        case 28:\n          _context8.next = 30;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* cancel */ "c"])(sendprocess);\n\n        case 30:\n          _context8.next = 32;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* cancel */ "c"])(receiveprocess);\n\n        case 32:\n          ids = Object.keys(actions);\n          i = 0;\n\n        case 34:\n          if (!(i < ids.length)) {\n            _context8.next = 46;\n            break;\n          }\n\n          action = actions[ids[i]];\n\n          if (!action.timeouter) {\n            _context8.next = 39;\n            break;\n          }\n\n          _context8.next = 39;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* cancel */ "c"])(action.timeouter);\n\n        case 39:\n          response = action.onerror({\n            error: "Lost connection to the server",\n            error_code: "LostConnection"\n          });\n\n          if (!response) {\n            _context8.next = 43;\n            break;\n          }\n\n          _context8.next = 43;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(response);\n\n        case 43:\n          i++;\n          _context8.next = 34;\n          break;\n\n        case 46:\n          delete messages[count];\n          _context8.next = 49;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* delay */ "d"])(delayMS || 5000);\n\n        case 49:\n          _context8.next = 14;\n          break;\n\n        case 51:\n        case "end":\n          return _context8.stop();\n      }\n    }\n  }, _marked8);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy93c2NsaWVudC5qcz9jMzg4Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHsgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsgfVxuXG5mdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpOyB9XG5cbmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09IFwiT2JqZWN0XCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09IFwiTWFwXCIgfHwgbiA9PT0gXCJTZXRcIikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSBcIkFyZ3VtZW50c1wiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfVxuXG5mdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHsgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChpdGVyKSkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7IH1cblxuZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikgeyBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkoYXJyKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSB7IGFycjJbaV0gPSBhcnJbaV07IH0gcmV0dXJuIGFycjI7IH1cblxudmFyIF9tYXJrZWQgPSAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsobWF5YmVUaW1lb3V0TWVzc2FnZSksXG4gICAgX21hcmtlZDIgPSAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoc2VuZFRvU29ja2V0KSxcbiAgICBfbWFya2VkMyA9IC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayh0aWNrTWVzc2FnZXMpLFxuICAgIF9tYXJrZWQ0ID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKHN0YXJ0V1MpLFxuICAgIF9tYXJrZWQ1ID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKHByb2Nlc3NXc1NlbmQpLFxuICAgIF9tYXJrZWQ2ID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKHByb2Nlc3NXc1JlY2VpdmUpLFxuICAgIF9tYXJrZWQ3ID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGdldFdTQ29tbWFuZHMpLFxuICAgIF9tYXJrZWQ4ID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGxpc3Rlbik7XG5cbmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCB7IGNhbGwsIGFsbCwgY2FuY2VsLCBmb3JrLCBwdXQsIHJhY2UsIHNwYXduLCB0YWtlLCBkZWxheSB9IGZyb20gXCJyZWR1eC1zYWdhL2VmZmVjdHNcIjtcbmltcG9ydCB7IGNyZWF0ZUFjdGlvbiwgY3JlYXRlUmVkdWNlciB9IGZyb20gXCJyZWR1eC1hY3RcIjtcbmltcG9ydCB7IEVORCwgY2hhbm5lbCB9IGZyb20gXCJyZWR1eC1zYWdhXCI7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tIFwidXVpZFwiO1xuXG52YXIgV1NTdGF0ZUtscyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFdTU3RhdGVLbHMoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFdTU3RhdGVLbHMpO1xuXG4gICAgdGhpcy5Mb2FkaW5nID0gY3JlYXRlQWN0aW9uKFwiU3RhcnRpbmcgdG8gb3BlbiBjb25uZWN0aW9uXCIpO1xuICAgIHRoaXMuRXJyb3IgPSBjcmVhdGVBY3Rpb24oXCJHb3QgYW4gZXJyb3IgY29ubmVjdGluZyB0byB0aGUgd2Vic29ja2V0XCIpO1xuICAgIHRoaXMuQ29ubmVjdGVkID0gY3JlYXRlQWN0aW9uKFwiU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byB0aGUgd2Vic29ja2V0XCIpO1xuICAgIHRoaXMuU2VydmVyVGltZSA9IGNyZWF0ZUFjdGlvbihcIkdvdCBhIG5ldyBzZXJ2ZXIgdGltZSBmcm9tIHRoZSBzZXJ2ZXJcIiwgZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRpbWU6IHRpbWVcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoV1NTdGF0ZUtscywgW3tcbiAgICBrZXk6IFwiZGlzYWJsZWRTZWxlY3RvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNhYmxlZFNlbGVjdG9yKHN0YXRlKSB7XG4gICAgICByZXR1cm4gc3RhdGUud3MubG9hZGluZyB8fCBzdGF0ZS53cy5lcnJvcjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVkdWNlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWR1Y2VyKCkge1xuICAgICAgdmFyIF9jcmVhdGVSZWR1Y2VyO1xuXG4gICAgICByZXR1cm4gY3JlYXRlUmVkdWNlcigoX2NyZWF0ZVJlZHVjZXIgPSB7fSwgX2RlZmluZVByb3BlcnR5KF9jcmVhdGVSZWR1Y2VyLCB0aGlzLkxvYWRpbmcsIGZ1bmN0aW9uIChzdGF0ZSwgcGF5bG9hZCkge1xuICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCB7XG4gICAgICAgICAgbG9hZGluZzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pLCBfZGVmaW5lUHJvcGVydHkoX2NyZWF0ZVJlZHVjZXIsIHRoaXMuRXJyb3IsIGZ1bmN0aW9uIChzdGF0ZSwgX3JlZikge1xuICAgICAgICB2YXIgZXJyb3IgPSBfcmVmLmVycm9yO1xuICAgICAgICB2YXIgZXJyb3JTdHIgPSBcIlVua25vd24gZXJyb3JcIjtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGVycm9yU3RyID0gXCJcIi5jb25jYXQoZXJyb3IuZXJyb3JfY29kZSwgXCI6IFwiKS5jb25jYXQoZXJyb3IuZXJyb3IpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGVycm9yU3RyID0gSlNPTi5zdHJpbmdpZnkoZXJyb3IpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGVycm9yU3RyID0gZXJyb3IudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgZXJyb3JTdHIgPSBTdHJpbmcoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgICBlcnJvcjogZXJyb3IsXG4gICAgICAgICAgZXJyb3JTdHI6IGVycm9yU3RyLFxuICAgICAgICAgIGxvYWRpbmc6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9KSwgX2RlZmluZVByb3BlcnR5KF9jcmVhdGVSZWR1Y2VyLCB0aGlzLkNvbm5lY3RlZCwgZnVuY3Rpb24gKHN0YXRlLCBwYXlsb2FkKSB7XG4gICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgICBlcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgIGVycm9yU3RyOiB1bmRlZmluZWQsXG4gICAgICAgICAgbG9hZGluZzogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9KSwgX2NyZWF0ZVJlZHVjZXIpLCB7XG4gICAgICAgIGVycm9yOiB1bmRlZmluZWQsXG4gICAgICAgIGVycm9yU3RyOiB1bmRlZmluZWQsXG4gICAgICAgIGRldmljZXM6IHt9LFxuICAgICAgICBsb2FkaW5nOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gV1NTdGF0ZUtscztcbn0oKTtcblxuZXhwb3J0IHZhciBXU1N0YXRlID0gbmV3IFdTU3RhdGVLbHMoKTtcbmV4cG9ydCB2YXIgV1NDb21tYW5kID0gY3JlYXRlQWN0aW9uKFwiQ29tbWFuZCB0byB0aGUgd2Vic29ja2V0IHNlcnZlclwiLCBmdW5jdGlvbiAocGF0aCwgYm9keSwgX3JlZjIpIHtcbiAgdmFyIG9ucmVwbHkgPSBfcmVmMi5vbnJlcGx5LFxuICAgICAgb25lcnJvciA9IF9yZWYyLm9uZXJyb3IsXG4gICAgICBvbnByb2dyZXNzID0gX3JlZjIub25wcm9ncmVzcyxcbiAgICAgIHRpbWVvdXQgPSBfcmVmMi50aW1lb3V0LFxuICAgICAgb3JpZ2luYWwgPSBfcmVmMi5vcmlnaW5hbCxcbiAgICAgIHBhcmVudE1lc3NhZ2VJZHMgPSBfcmVmMi5wYXJlbnRNZXNzYWdlSWRzO1xuICByZXR1cm4ge1xuICAgIHBhdGg6IHBhdGgsXG4gICAgYm9keTogYm9keSxcbiAgICBvbnJlcGx5OiBvbnJlcGx5LFxuICAgIG9uZXJyb3I6IG9uZXJyb3IsXG4gICAgb25wcm9ncmVzczogb25wcm9ncmVzcyxcbiAgICB0aW1lb3V0OiB0aW1lb3V0LFxuICAgIG9yaWdpbmFsOiBvcmlnaW5hbCxcbiAgICBwYXJlbnRNZXNzYWdlSWRzOiBwYXJlbnRNZXNzYWdlSWRzXG4gIH07XG59KTtcblxuZnVuY3Rpb24gbWF5YmVUaW1lb3V0TWVzc2FnZShhY3Rpb25zLCBtZXNzYWdlSWQpIHtcbiAgdmFyIGFjdGlvbiwgcmVzcG9uc2U7XG4gIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBtYXliZVRpbWVvdXRNZXNzYWdlJChfY29udGV4dCkge1xuICAgIHdoaWxlICgxKSB7XG4gICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBhY3Rpb24gPSBhY3Rpb25zW21lc3NhZ2VJZF07XG4gICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7XG4gICAgICAgICAgcmV0dXJuIGRlbGF5KGFjdGlvbi50aW1lb3V0IHx8IDUwMDApO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMztcbiAgICAgICAgICByZXNwb25zZSA9IGFjdGlvbi5vbmVycm9yKHtcbiAgICAgICAgICAgIGVycm9yOiBcIlRpbWVkb3V0IHdhaXRpbmcgZm9yIGEgcmVwbHkgdG8gdGhlIG1lc3NhZ2VcIixcbiAgICAgICAgICAgIGVycm9yX2NvZGU6IFwiVGltZWRvdXRcIlxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgNTpcbiAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNTtcblxuICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5O1xuICAgICAgICAgIHJldHVybiBwdXQocmVzcG9uc2UpO1xuXG4gICAgICAgIGNhc2UgOTpcbiAgICAgICAgICBkZWxldGUgYWN0aW9uc1ttZXNzYWdlSWRdO1xuXG4gICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCg1KTtcblxuICAgICAgICBjYXNlIDExOlxuICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIF9tYXJrZWQsIG51bGwsIFtbMywsIDUsIDExXV0pO1xufVxuXG5mdW5jdGlvbiBzZW5kVG9Tb2NrZXQoc29ja2V0LCBzZW5kY2gsIGFjdGlvbnMpIHtcbiAgdmFyIGFjdGlvbiwgcmVzcG9uc2U7XG4gIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBzZW5kVG9Tb2NrZXQkKF9jb250ZXh0Mikge1xuICAgIHdoaWxlICgxKSB7XG4gICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGlmICghdHJ1ZSkge1xuICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxODtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMztcbiAgICAgICAgICByZXR1cm4gdGFrZShzZW5kY2gpO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBhY3Rpb24gPSBfY29udGV4dDIuc2VudDtcblxuICAgICAgICAgIGlmICghKHNvY2tldC5yZWFkeVN0YXRlID09PSAxKSkge1xuICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoYWN0aW9uLmRhdGEpKTtcbiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE2O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICBfY29udGV4dDIucHJldiA9IDg7XG4gICAgICAgICAgcmVzcG9uc2UgPSBhY3Rpb24ub25lcnJvcih7XG4gICAgICAgICAgICBlcnJvcjogXCJDb25uZWN0aW9uIHRvIHRoZSBzZXJ2ZXIgd2Fzbid0IGFjdGl2ZVwiLFxuICAgICAgICAgICAgZXJyb3JfY29kZTogXCJJbmFjdGl2ZUNvbm5lY3Rpb25cIlxuICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhc2UgMTA6XG4gICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAxMDtcblxuICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0O1xuICAgICAgICAgIHJldHVybiBwdXQocmVzcG9uc2UpO1xuXG4gICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgZGVsZXRlIGFjdGlvbnNbYWN0aW9uLm1lc3NhZ2VJZF07XG5cbiAgICAgICAgY2FzZSAxNTpcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmZpbmlzaCgxMCk7XG5cbiAgICAgICAgY2FzZSAxNjpcbiAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDA7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAxODpcbiAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgX21hcmtlZDIsIG51bGwsIFtbOCwsIDEwLCAxNl1dKTtcbn1cblxuZnVuY3Rpb24gdGlja01lc3NhZ2VzKHNvY2tldCkge1xuICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gdGlja01lc3NhZ2VzJChfY29udGV4dDMpIHtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBpZiAoIXRydWUpIHtcbiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNjtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMztcbiAgICAgICAgICByZXR1cm4gZGVsYXkoMTUwMDApO1xuXG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICBpZiAoc29ja2V0LnJlYWR5U3RhdGUgPT09IDEpIHtcbiAgICAgICAgICAgIHNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgcGF0aDogXCJfX3RpY2tfX1wiXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgNjpcbiAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgX21hcmtlZDMpO1xufVxuXG5mdW5jdGlvbiBzdGFydFdTKHVybCwgY291bnQsIHNlbmRjaCwgcmVjZWl2ZWNoLCBhY3Rpb25zKSB7XG4gIHZhciBzb2NrZXQsIG9uZXJyb3JzLCBvbmNsb3Nlcywgd3MsIHN0YXJ0LCBfeWllbGQkcmFjZSwgdGltZW91dCwgdywgZGlmZiwgd2FpdGVyLCB0aWNrZXIsIHNlbmRlcjtcblxuICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gc3RhcnRXUyQoX2NvbnRleHQ0KSB7XG4gICAgd2hpbGUgKDEpIHtcbiAgICAgIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgc29ja2V0ID0gbmV3IFdlYlNvY2tldCh1cmwpO1xuICAgICAgICAgIG9uZXJyb3JzID0gW107XG4gICAgICAgICAgb25jbG9zZXMgPSBbXTtcbiAgICAgICAgICB3cyA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHNvY2tldC5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJlc29sdmUoc29ja2V0KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHNvY2tldC5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJlY2VpdmVjaC5wdXQoZXZlbnQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc29ja2V0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJXZWJzb2NrZXQgZ290IGVycm9yXCIsIGV2dCk7XG4gICAgICAgICAgICAgIHJlamVjdChldnQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgc29ja2V0Lm9uY2xvc2UgPSBmdW5jdGlvbiAoZXZ0KSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJXZWJzb2NrZXQgY2xvc2VkXCIsIGV2dCk7XG4gICAgICAgICAgICAgIHJlamVjdChldnQpO1xuICAgICAgICAgICAgICBvbmNsb3Nlcy5tYXAoZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGNiKGV2dCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBzdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSA1O1xuICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gODtcbiAgICAgICAgICByZXR1cm4gcmFjZSh7XG4gICAgICAgICAgICB0aW1lb3V0OiBkZWxheSgyMDAwKSxcbiAgICAgICAgICAgIHc6IHdzXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY2FzZSA4OlxuICAgICAgICAgIF95aWVsZCRyYWNlID0gX2NvbnRleHQ0LnNlbnQ7XG4gICAgICAgICAgdGltZW91dCA9IF95aWVsZCRyYWNlLnRpbWVvdXQ7XG4gICAgICAgICAgdyA9IF95aWVsZCRyYWNlLnc7XG4gICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDEzOlxuICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTM7XG4gICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0W1wiY2F0Y2hcIl0oNSk7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBzdGFydCB3ZWJzb2NrZXQgY29ubmVjdGlvblwiLCBfY29udGV4dDQudDApO1xuICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTg7XG4gICAgICAgICAgcmV0dXJuIHB1dChXU1N0YXRlLkVycm9yKHtcbiAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgIGVycm9yOiBcIkNvdWxkIG5vdCBjb25uZWN0IHRvIHNlcnZlclwiLFxuICAgICAgICAgICAgICBlcnJvcl9jb2RlOiBcIkZhaWxlZFRvQ29ubmVjdGVkXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgY2FzZSAxODpcbiAgICAgICAgICBkaWZmID0gRGF0ZS5ub3coKSAtIHN0YXJ0O1xuXG4gICAgICAgICAgaWYgKCEoZGlmZiA8IDEwMDApKSB7XG4gICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDIyO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyMjtcbiAgICAgICAgICByZXR1cm4gZGVsYXkoMTAwMCAtIGRpZmYpO1xuXG4gICAgICAgIGNhc2UgMjI6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoXCJyZXR1cm5cIik7XG5cbiAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICBpZiAoIXRpbWVvdXQpIHtcbiAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwidGltZWQgb3V0IHdhaXRpbmcgZm9yIHdlYnNvY2tldFwiKTtcbiAgICAgICAgICBzb2NrZXQuY2xvc2UoKTtcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdChcInJldHVyblwiLCBmYWxzZSk7XG5cbiAgICAgICAgY2FzZSAyNzpcbiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDI5O1xuICAgICAgICAgIHJldHVybiBjYWxsKGNoYW5uZWwpO1xuXG4gICAgICAgIGNhc2UgMjk6XG4gICAgICAgICAgd2FpdGVyID0gX2NvbnRleHQ0LnNlbnQ7XG4gICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzMjtcbiAgICAgICAgICByZXR1cm4gZm9yayh0aWNrTWVzc2FnZXMsIHcpO1xuXG4gICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgdGlja2VyID0gX2NvbnRleHQ0LnNlbnQ7XG4gICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAzNTtcbiAgICAgICAgICByZXR1cm4gZm9yayhzZW5kVG9Tb2NrZXQsIHcsIHNlbmRjaCwgYWN0aW9ucyk7XG5cbiAgICAgICAgY2FzZSAzNTpcbiAgICAgICAgICBzZW5kZXIgPSBfY29udGV4dDQuc2VudDtcbiAgICAgICAgICBvbmNsb3Nlcy5wdXNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHdhaXRlci5wdXQoRU5EKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfY29udGV4dDQucHJldiA9IDM3O1xuICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDA7XG4gICAgICAgICAgcmV0dXJuIHB1dChXU1N0YXRlLkNvbm5lY3RlZCgpKTtcblxuICAgICAgICBjYXNlIDQwOlxuICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNDI7XG4gICAgICAgICAgcmV0dXJuIHRha2Uod2FpdGVyKTtcblxuICAgICAgICBjYXNlIDQyOlxuICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNDI7XG4gICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0NTtcbiAgICAgICAgICByZXR1cm4gcHV0KFdTU3RhdGUuRXJyb3Ioe1xuICAgICAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICAgICAgZXJyb3I6IFwiU2VydmVyIHdlbnQgYXdheVwiLFxuICAgICAgICAgICAgICBlcnJvcl9jb2RlOiBcIlNlcnZlcldlbnRBd2F5XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgY2FzZSA0NTpcbiAgICAgICAgICB3YWl0ZXIuY2xvc2UoKTtcbiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ4O1xuICAgICAgICAgIHJldHVybiBjYW5jZWwodGlja2VyKTtcblxuICAgICAgICBjYXNlIDQ4OlxuICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gNTA7XG4gICAgICAgICAgcmV0dXJuIGNhbmNlbChzZW5kZXIpO1xuXG4gICAgICAgIGNhc2UgNTA6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5maW5pc2goNDIpO1xuXG4gICAgICAgIGNhc2UgNTE6XG4gICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIF9tYXJrZWQ0LCBudWxsLCBbWzUsIDEzXSwgWzM3LCwgNDIsIDUxXV0pO1xufVxuXG5mdW5jdGlvbiBwcm9jZXNzV3NTZW5kKGNvbW1hbmRjaCwgc2VuZGNoLCBhY3Rpb25zLCBkZWZhdWx0b25lcnJvcikge1xuICB2YXIgbm9ybWFsaXNlLCBfeWllbGQkdGFrZSwgcGF5bG9hZCwgbWVzc2FnZUlkLCBub3JtYWxpc2VkO1xuXG4gIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBwcm9jZXNzV3NTZW5kJChfY29udGV4dDUpIHtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBub3JtYWxpc2UgPSBmdW5jdGlvbiBub3JtYWxpc2UobWVzc2FnZUlkLCBfcmVmMykge1xuICAgICAgICAgICAgdmFyIHBhdGggPSBfcmVmMy5wYXRoLFxuICAgICAgICAgICAgICAgIGJvZHkgPSBfcmVmMy5ib2R5LFxuICAgICAgICAgICAgICAgIG9uZXJyb3IgPSBfcmVmMy5vbmVycm9yLFxuICAgICAgICAgICAgICAgIG9ucmVwbHkgPSBfcmVmMy5vbnJlcGx5LFxuICAgICAgICAgICAgICAgIG9ucHJvZ3Jlc3MgPSBfcmVmMy5vbnByb2dyZXNzLFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsID0gX3JlZjMub3JpZ2luYWwsXG4gICAgICAgICAgICAgICAgdGltZW91dCA9IF9yZWYzLnRpbWVvdXQ7XG4gICAgICAgICAgICB2YXIgZG9uZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2YXIgY3JlYXRlID0gZnVuY3Rpb24gY3JlYXRlKGNiLCBtc2cpIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2IobXNnKTtcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRvbmVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JfY29kZTogXCJJTlRFUk5BTF9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZS50b1N0cmluZygpXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlMikge1xuICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgICAgICAgYm9keTogYm9keSxcbiAgICAgICAgICAgICAgbWVzc2FnZV9pZDogbWVzc2FnZUlkXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZG9lcnJvciA9IGZ1bmN0aW9uIGRvZXJyb3IoZXJyb3IpIHtcbiAgICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcblxuICAgICAgICAgICAgICBpZiAob25lcnJvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwdXQoY3JlYXRlKG9uZXJyb3IsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZXJyb3IpLCB7fSwge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlSWQsXG4gICAgICAgICAgICAgICAgICBvcmlnaW5hbDogb3JpZ2luYWxcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgZG9yZXBseSA9IGZ1bmN0aW9uIGRvcmVwbHkoZGF0YSwgbXNnaWQpIHtcbiAgICAgICAgICAgICAgaWYgKGRvbmUgfHwgIWRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdmFyIHBheWxvYWRzID0gW107XG5cbiAgICAgICAgICAgICAgaWYgKGRhdGEuZXJyb3JfY29kZSAmJiBvbmVycm9yKSB7XG4gICAgICAgICAgICAgICAgcGF5bG9hZHMucHVzaChwdXQoY3JlYXRlKG9uZXJyb3IsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgZGF0YSksIHt9LCB7XG4gICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IFwiXCIsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgICAgIG9yaWdpbmFsOiBvcmlnaW5hbFxuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGEuZXJyb3IgJiYgb25lcnJvcikge1xuICAgICAgICAgICAgICAgIHBheWxvYWRzLnB1c2gocHV0KGNyZWF0ZShvbmVycm9yLCBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGRhdGEuZXJyb3IubXNnKSwge30sIHtcbiAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogZGF0YS5lcnJvci5uYW1lc3BhY2UsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgICAgIG9yaWdpbmFsOiBvcmlnaW5hbFxuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgaWYgKGRhdGEucmVzdWx0ICYmIG9ucmVwbHkpIHtcbiAgICAgICAgICAgICAgICBwYXlsb2Fkcy5wdXNoKHB1dChjcmVhdGUob25yZXBseSwge1xuICAgICAgICAgICAgICAgICAgbWVzc2FnZUlkOiBtZXNzYWdlSWQsXG4gICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLnJlc3VsdCxcbiAgICAgICAgICAgICAgICAgIG9yaWdpbmFsOiBvcmlnaW5hbFxuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICByZXR1cm4gYWxsKHBheWxvYWRzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBkb3Byb2dyZXNzID0gZnVuY3Rpb24gZG9wcm9ncmVzcyhwcm9ncmVzcykge1xuICAgICAgICAgICAgICBpZiAob25wcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBwdXQoY3JlYXRlKG9ucHJvZ3Jlc3MsIHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZUlkLFxuICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IHByb2dyZXNzLFxuICAgICAgICAgICAgICAgICAgb3JpZ2luYWw6IG9yaWdpbmFsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgdGltZW91dDogdGltZW91dCxcbiAgICAgICAgICAgICAgb25yZXBseTogZG9yZXBseSxcbiAgICAgICAgICAgICAgb25lcnJvcjogZG9lcnJvcixcbiAgICAgICAgICAgICAgb25wcm9ncmVzczogZG9wcm9ncmVzc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBpZiAoIXRydWUpIHtcbiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7XG4gICAgICAgICAgcmV0dXJuIHRha2UoY29tbWFuZGNoKTtcblxuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgX3lpZWxkJHRha2UgPSBfY29udGV4dDUuc2VudDtcbiAgICAgICAgICBwYXlsb2FkID0gX3lpZWxkJHRha2UucGF5bG9hZDtcbiAgICAgICAgICBtZXNzYWdlSWQgPSB1dWlkdjQoKTtcblxuICAgICAgICAgIGlmIChwYXlsb2FkLnBhcmVudE1lc3NhZ2VJZHMpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VJZCA9IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocGF5bG9hZC5wYXJlbnRNZXNzYWdlSWRzKSwgW21lc3NhZ2VJZF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG5vcm1hbGlzZWQgPSBub3JtYWxpc2UobWVzc2FnZUlkLCBwYXlsb2FkKTtcbiAgICAgICAgICBhY3Rpb25zW21lc3NhZ2VJZF0gPSBub3JtYWxpc2VkO1xuICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTI7XG4gICAgICAgICAgcmV0dXJuIHNwYXduKG1heWJlVGltZW91dE1lc3NhZ2UsIGFjdGlvbnMsIG1lc3NhZ2VJZCk7XG5cbiAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICBub3JtYWxpc2VkLnRpbWVvdXRlciA9IF9jb250ZXh0NS5zZW50O1xuICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTU7XG4gICAgICAgICAgcmV0dXJuIHB1dChzZW5kY2gsIG5vcm1hbGlzZWQpO1xuXG4gICAgICAgIGNhc2UgMTU6XG4gICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgMTc6XG4gICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIF9tYXJrZWQ1KTtcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1dzUmVjZWl2ZShyZWNlaXZlY2gsIGFjdGlvbnMpIHtcbiAgdmFyIG1ha2VSZXNwb25zZSwgX3lpZWxkJHRha2UyLCBkYXRhLCBhY3Rpb24sIHJlc3BvbnNlO1xuXG4gIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBwcm9jZXNzV3NSZWNlaXZlJChfY29udGV4dDYpIHtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBtYWtlUmVzcG9uc2UgPSBmdW5jdGlvbiBtYWtlUmVzcG9uc2UoYWN0aW9uLCBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS5yZXBseSkge1xuICAgICAgICAgICAgICBpZiAoZGF0YS5yZXBseS5wcm9ncmVzcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY3Rpb24ub25wcm9ncmVzcyhkYXRhLnJlcGx5LnByb2dyZXNzKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aW9uLm9ucmVwbHkoZGF0YS5yZXBseSwgZGF0YS5tZXNzYWdlX2lkKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZGF0YS5lcnJvcikge1xuICAgICAgICAgICAgICByZXR1cm4gYWN0aW9uLm9uZXJyb3IoZGF0YS5lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKCF0cnVlKSB7XG4gICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDQxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0O1xuICAgICAgICAgIHJldHVybiB0YWtlKHJlY2VpdmVjaCk7XG5cbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIF95aWVsZCR0YWtlMiA9IF9jb250ZXh0Ni5zZW50O1xuICAgICAgICAgIGRhdGEgPSBfeWllbGQkdGFrZTIuZGF0YTtcbiAgICAgICAgICBfY29udGV4dDYucHJldiA9IDY7XG4gICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxNDtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMTA7XG4gICAgICAgICAgX2NvbnRleHQ2LnQwID0gX2NvbnRleHQ2W1wiY2F0Y2hcIl0oNik7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcImZhaWxlZCB0byBwYXJzZSBqc29uIGZyb20gdGhlIHNlcnZlclwiLCBfY29udGV4dDYudDApO1xuICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KFwiY29udGludWVcIiwgMSk7XG5cbiAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICBpZiAoZGF0YS5tZXNzYWdlX2lkKSB7XG4gICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE3O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyIHdpdGhvdXQgYSBtZXNzYWdlIGlkXCIsIGRhdGEpO1xuICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KFwiY29udGludWVcIiwgMSk7XG5cbiAgICAgICAgY2FzZSAxNzpcbiAgICAgICAgICBpZiAoIShkYXRhLm1lc3NhZ2VfaWQgPT0gXCJfX3RpY2tfX1wiKSkge1xuICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxOTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KFwiY29udGludWVcIiwgMSk7XG5cbiAgICAgICAgY2FzZSAxOTpcbiAgICAgICAgICBpZiAoIShkYXRhLm1lc3NhZ2VfaWQgPT0gXCJfX3NlcnZlcl90aW1lX19cIikpIHtcbiAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDIyO1xuICAgICAgICAgIHJldHVybiBwdXQoV1NTdGF0ZS5TZXJ2ZXJUaW1lKGRhdGEucmVwbHkpKTtcblxuICAgICAgICBjYXNlIDIyOlxuICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KFwiY29udGludWVcIiwgMSk7XG5cbiAgICAgICAgY2FzZSAyMzpcbiAgICAgICAgICBhY3Rpb24gPSBhY3Rpb25zW2RhdGEubWVzc2FnZV9pZF07XG5cbiAgICAgICAgICBpZiAoYWN0aW9uKSB7XG4gICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI3O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcIkdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyIHdpdGggdW5rbm93biBtZXNzYWdlIGlkXCIsIGRhdGEubWVzc2FnZV9pZCwgZGF0YSk7XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoXCJjb250aW51ZVwiLCAxKTtcblxuICAgICAgICBjYXNlIDI3OlxuICAgICAgICAgIGlmICghYWN0aW9uLnRpbWVvdXRlcikge1xuICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzMDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzA7XG4gICAgICAgICAgcmV0dXJuIGNhbmNlbChhY3Rpb24udGltZW91dGVyKTtcblxuICAgICAgICBjYXNlIDMwOlxuICAgICAgICAgIHJlc3BvbnNlID0gdW5kZWZpbmVkO1xuICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMzE7XG4gICAgICAgICAgcmVzcG9uc2UgPSBtYWtlUmVzcG9uc2UoYWN0aW9uLCBkYXRhKTtcblxuICAgICAgICBjYXNlIDMzOlxuICAgICAgICAgIF9jb250ZXh0Ni5wcmV2ID0gMzM7XG5cbiAgICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM3O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzNztcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG5cbiAgICAgICAgY2FzZSAzNzpcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmZpbmlzaCgzMyk7XG5cbiAgICAgICAgY2FzZSAzODpcbiAgICAgICAgICAvLyBGaW5pc2hlZCB3aXRoIHRoaXMgbWVzc2FnZSBpZiBub3QgYSBwcm9ncmVzcyBtZXNzYWdlXG4gICAgICAgICAgaWYgKHJlc3BvbnNlICYmICghZGF0YS5yZXBseSB8fCAhZGF0YS5yZXBseS5wcm9ncmVzcykpIHtcbiAgICAgICAgICAgIGRlbGV0ZSBhY3Rpb25zW2RhdGEubWVzc2FnZV9pZF07XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgNDE6XG4gICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIF9tYXJrZWQ2LCBudWxsLCBbWzYsIDEwXSwgWzMxLCwgMzMsIDM4XV0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V1NDb21tYW5kcyhjb21tYW5kY2gpIHtcbiAgdmFyIG54dDtcbiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIGdldFdTQ29tbWFuZHMkKF9jb250ZXh0Nykge1xuICAgIHdoaWxlICgxKSB7XG4gICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIGlmICghdHJ1ZSkge1xuICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSA4O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAzO1xuICAgICAgICAgIHJldHVybiB0YWtlKFdTQ29tbWFuZCk7XG5cbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgIG54dCA9IF9jb250ZXh0Ny5zZW50O1xuICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNjtcbiAgICAgICAgICByZXR1cm4gcHV0KGNvbW1hbmRjaCwgbnh0KTtcblxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAwO1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgX21hcmtlZDcpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxpc3Rlbih1cmwsIGRlZmF1bHRvbmVycm9yLCBkZWxheU1TKSB7XG4gIHZhciBjb3VudCwgbWVzc2FnZXMsIHNlbmRjaCwgcmVjZWl2ZWNoLCBjb21tYW5kY2gsIGFjdGlvbnMsIHNlbmRwcm9jZXNzLCByZWNlaXZlcHJvY2VzcywgaWRzLCBpLCBhY3Rpb24sIHJlc3BvbnNlO1xuICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gbGlzdGVuJChfY29udGV4dDgpIHtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgc3dpdGNoIChfY29udGV4dDgucHJldiA9IF9jb250ZXh0OC5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBjb3VudCA9IDA7XG4gICAgICAgICAgbWVzc2FnZXMgPSB7fTtcbiAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDQ7XG4gICAgICAgICAgcmV0dXJuIGNhbGwoY2hhbm5lbCk7XG5cbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIHNlbmRjaCA9IF9jb250ZXh0OC5zZW50O1xuICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNztcbiAgICAgICAgICByZXR1cm4gY2FsbChjaGFubmVsKTtcblxuICAgICAgICBjYXNlIDc6XG4gICAgICAgICAgcmVjZWl2ZWNoID0gX2NvbnRleHQ4LnNlbnQ7XG4gICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxMDtcbiAgICAgICAgICByZXR1cm4gY2FsbChjaGFubmVsKTtcblxuICAgICAgICBjYXNlIDEwOlxuICAgICAgICAgIGNvbW1hbmRjaCA9IF9jb250ZXh0OC5zZW50O1xuXG4gICAgICAgICAgaWYgKGRlZmF1bHRvbmVycm9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGRlZmF1bHRvbmVycm9yID0gZnVuY3Rpb24gZGVmYXVsdG9uZXJyb3IoZSkge1xuICAgICAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSAvLyBUaGlzIGlzIG91dHNpZGUgdGhlIHdoaWxlIHRydWUgc28gdGhhdCB3ZSBkb24ndCBtaXNzIG1lc3NhZ2VzXG4gICAgICAgICAgLy8gd2hlbiB0aGUgc2VydmVyIGdvZXMgYXdheSBhbmQgYmVmb3JlIHdlJ3ZlIHN0YXJ0ZWQgcHJvY2Vzc1dzU2VuZCBhZ2FpblxuXG5cbiAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE0O1xuICAgICAgICAgIHJldHVybiBmb3JrKGdldFdTQ29tbWFuZHMsIGNvbW1hbmRjaCk7XG5cbiAgICAgICAgY2FzZSAxNDpcbiAgICAgICAgICBpZiAoIXRydWUpIHtcbiAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNTE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE3O1xuICAgICAgICAgIHJldHVybiBwdXQoV1NTdGF0ZS5Mb2FkaW5nKCkpO1xuXG4gICAgICAgIGNhc2UgMTc6XG4gICAgICAgICAgY291bnQgKz0gMTtcbiAgICAgICAgICBhY3Rpb25zID0ge307XG4gICAgICAgICAgbWVzc2FnZXNbY291bnRdID0gYWN0aW9ucztcbiAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDIyO1xuICAgICAgICAgIHJldHVybiBmb3JrKHByb2Nlc3NXc1NlbmQsIGNvbW1hbmRjaCwgc2VuZGNoLCBhY3Rpb25zLCBkZWZhdWx0b25lcnJvcik7XG5cbiAgICAgICAgY2FzZSAyMjpcbiAgICAgICAgICBzZW5kcHJvY2VzcyA9IF9jb250ZXh0OC5zZW50O1xuICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjU7XG4gICAgICAgICAgcmV0dXJuIGZvcmsocHJvY2Vzc1dzUmVjZWl2ZSwgcmVjZWl2ZWNoLCBhY3Rpb25zKTtcblxuICAgICAgICBjYXNlIDI1OlxuICAgICAgICAgIHJlY2VpdmVwcm9jZXNzID0gX2NvbnRleHQ4LnNlbnQ7XG4gICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAyODtcbiAgICAgICAgICByZXR1cm4gY2FsbChzdGFydFdTLCB1cmwsIGNvdW50LCBzZW5kY2gsIHJlY2VpdmVjaCwgYWN0aW9ucyk7XG5cbiAgICAgICAgY2FzZSAyODpcbiAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDMwO1xuICAgICAgICAgIHJldHVybiBjYW5jZWwoc2VuZHByb2Nlc3MpO1xuXG4gICAgICAgIGNhc2UgMzA6XG4gICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzMjtcbiAgICAgICAgICByZXR1cm4gY2FuY2VsKHJlY2VpdmVwcm9jZXNzKTtcblxuICAgICAgICBjYXNlIDMyOlxuICAgICAgICAgIGlkcyA9IE9iamVjdC5rZXlzKGFjdGlvbnMpO1xuICAgICAgICAgIGkgPSAwO1xuXG4gICAgICAgIGNhc2UgMzQ6XG4gICAgICAgICAgaWYgKCEoaSA8IGlkcy5sZW5ndGgpKSB7XG4gICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDQ2O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYWN0aW9uID0gYWN0aW9uc1tpZHNbaV1dO1xuXG4gICAgICAgICAgaWYgKCFhY3Rpb24udGltZW91dGVyKSB7XG4gICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDM5O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzOTtcbiAgICAgICAgICByZXR1cm4gY2FuY2VsKGFjdGlvbi50aW1lb3V0ZXIpO1xuXG4gICAgICAgIGNhc2UgMzk6XG4gICAgICAgICAgcmVzcG9uc2UgPSBhY3Rpb24ub25lcnJvcih7XG4gICAgICAgICAgICBlcnJvcjogXCJMb3N0IGNvbm5lY3Rpb24gdG8gdGhlIHNlcnZlclwiLFxuICAgICAgICAgICAgZXJyb3JfY29kZTogXCJMb3N0Q29ubmVjdGlvblwiXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDQzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA0MztcbiAgICAgICAgICByZXR1cm4gcHV0KHJlc3BvbnNlKTtcblxuICAgICAgICBjYXNlIDQzOlxuICAgICAgICAgIGkrKztcbiAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDM0O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgNDY6XG4gICAgICAgICAgZGVsZXRlIG1lc3NhZ2VzW2NvdW50XTtcbiAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDQ5O1xuICAgICAgICAgIHJldHVybiBkZWxheShkZWxheU1TIHx8IDUwMDApO1xuXG4gICAgICAgIGNhc2UgNDk6XG4gICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxNDtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDUxOlxuICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBfbWFya2VkOCk7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///46\n')},478:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/regenerator-runtime/runtime.js\nvar runtime = __webpack_require__(199);\n\n// EXTERNAL MODULE: ./node_modules/core-js/stable/index.js\nvar stable = __webpack_require__(200);\n\n// EXTERNAL MODULE: ./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js + 1 modules\nvar redux_saga_effects_npm_proxy_esm = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 22 modules\nvar es = __webpack_require__(57);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(106);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(4);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./js/wsclient.js\nvar wsclient = __webpack_require__(46);\n\n// EXTERNAL MODULE: ./js/page.js\nvar page = __webpack_require__(195);\n\n// EXTERNAL MODULE: ./node_modules/redux-devtools-extension/index.js\nvar redux_devtools_extension = __webpack_require__(197);\n\n// EXTERNAL MODULE: ./node_modules/redux/es/redux.js\nvar redux = __webpack_require__(45);\n\n// EXTERNAL MODULE: ./node_modules/redux-saga/dist/redux-saga-core-npm-proxy.esm.js + 2 modules\nvar redux_saga_core_npm_proxy_esm = __webpack_require__(58);\n\n// EXTERNAL MODULE: ./js/state.js\nvar state = __webpack_require__(64);\n\n// CONCATENATED MODULE: ./js/store.js\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\n\n\nvar store_makeReducer = function makeReducer(extra) {\n  return Object(redux["combineReducers"])(_objectSpread(_objectSpread({}, extra), {}, {\n    wsclient: wsclient["b" /* WSState */].reducer(),\n    parts: state["a" /* PartState */].reducer()\n  }));\n};\nvar store_makeSagaMiddleware = function makeSagaMiddleware() {\n  return Object(redux_saga_core_npm_proxy_esm["c" /* default */])();\n};\nvar store_makeStore = function makeStore(reducer, sagaMiddleware) {\n  var creator = Object(redux["applyMiddleware"])(sagaMiddleware)(redux["createStore"]);\n  return creator(reducer, Object(redux_devtools_extension["devToolsEnhancer"])());\n};\nvar store_runSagaMiddleware = function runSagaMiddleware(sagaMiddleware) {\n  sagaMiddleware.run(state["b" /* partsSaga */]);\n};\n// CONCATENATED MODULE: ./js/index.js\nvar _marked = /*#__PURE__*/regeneratorRuntime.mark(mainSaga);\n\n\n\n\n\n\n\n\n\n\nvar js_reducer = store_makeReducer();\nvar js_sagaMiddleware = store_makeSagaMiddleware();\nvar store = store_makeStore(js_reducer, js_sagaMiddleware);\nstore_runSagaMiddleware(js_sagaMiddleware);\nvar scheme = "ws";\n\nif (window.location.protocol.startsWith("https")) {\n  scheme = "wss";\n}\n\nvar url = scheme + "://" + window.location.hostname + ":" + String(window.location.port) + "/v1/ws";\n\nfunction mainSaga() {\n  return regeneratorRuntime.wrap(function mainSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return Object(redux_saga_effects_npm_proxy_esm["e" /* fork */])(wsclient["c" /* listen */], url);\n\n        case 2:\n        case "end":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\njs_sagaMiddleware.run(mainSaga);\nreact_dom_default.a.render( /*#__PURE__*/react_default.a.createElement(es["a" /* Provider */], {\n  store: store\n}, /*#__PURE__*/react_default.a.createElement(page["a" /* default */], null)), document.getElementById("page"));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDc4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vanMvc3RvcmUuanM/ZjI3YiIsIndlYnBhY2s6Ly8vLi9qcy9pbmRleC5qcz9jMmZhIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG5pbXBvcnQgeyBkZXZUb29sc0VuaGFuY2VyIH0gZnJvbSBcInJlZHV4LWRldnRvb2xzLWV4dGVuc2lvblwiO1xuaW1wb3J0IHsgYXBwbHlNaWRkbGV3YXJlLCBjcmVhdGVTdG9yZSB9IGZyb20gXCJyZWR1eFwiO1xuaW1wb3J0IGNyZWF0ZVNhZ2FNaWRkbGV3YXJlIGZyb20gXCJyZWR1eC1zYWdhXCI7XG5pbXBvcnQgeyBjb21iaW5lUmVkdWNlcnMgfSBmcm9tIFwicmVkdXhcIjtcbmltcG9ydCB7IFBhcnRTdGF0ZSwgcGFydHNTYWdhIH0gZnJvbSBcIi4vc3RhdGUuanNcIjtcbmltcG9ydCB7IFdTU3RhdGUgfSBmcm9tIFwiLi93c2NsaWVudC5qc1wiO1xuZXhwb3J0IHZhciBtYWtlUmVkdWNlciA9IGZ1bmN0aW9uIG1ha2VSZWR1Y2VyKGV4dHJhKSB7XG4gIHJldHVybiBjb21iaW5lUmVkdWNlcnMoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBleHRyYSksIHt9LCB7XG4gICAgd3NjbGllbnQ6IFdTU3RhdGUucmVkdWNlcigpLFxuICAgIHBhcnRzOiBQYXJ0U3RhdGUucmVkdWNlcigpXG4gIH0pKTtcbn07XG5leHBvcnQgdmFyIG1ha2VTYWdhTWlkZGxld2FyZSA9IGZ1bmN0aW9uIG1ha2VTYWdhTWlkZGxld2FyZSgpIHtcbiAgcmV0dXJuIGNyZWF0ZVNhZ2FNaWRkbGV3YXJlKCk7XG59O1xuZXhwb3J0IHZhciBtYWtlU3RvcmUgPSBmdW5jdGlvbiBtYWtlU3RvcmUocmVkdWNlciwgc2FnYU1pZGRsZXdhcmUpIHtcbiAgdmFyIGNyZWF0b3IgPSBhcHBseU1pZGRsZXdhcmUoc2FnYU1pZGRsZXdhcmUpKGNyZWF0ZVN0b3JlKTtcbiAgcmV0dXJuIGNyZWF0b3IocmVkdWNlciwgZGV2VG9vbHNFbmhhbmNlcigpKTtcbn07XG5leHBvcnQgdmFyIHJ1blNhZ2FNaWRkbGV3YXJlID0gZnVuY3Rpb24gcnVuU2FnYU1pZGRsZXdhcmUoc2FnYU1pZGRsZXdhcmUpIHtcbiAgc2FnYU1pZGRsZXdhcmUucnVuKHBhcnRzU2FnYSk7XG59OyIsInZhciBfbWFya2VkID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKG1haW5TYWdhKTtcblxuaW1wb3J0IFwicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lXCI7XG5pbXBvcnQgXCJjb3JlLWpzL3N0YWJsZVwiO1xuaW1wb3J0IHsgZm9yayB9IGZyb20gXCJyZWR1eC1zYWdhL2VmZmVjdHNcIjtcbmltcG9ydCB7IFByb3ZpZGVyIH0gZnJvbSBcInJlYWN0LXJlZHV4XCI7XG5pbXBvcnQgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiO1xuaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgbGlzdGVuIH0gZnJvbSBcIi4vd3NjbGllbnQuanNcIjtcbmltcG9ydCBQYWdlIGZyb20gXCIuL3BhZ2UuanNcIjtcbmltcG9ydCB7IG1ha2VSZWR1Y2VyLCBtYWtlU2FnYU1pZGRsZXdhcmUsIG1ha2VTdG9yZSwgcnVuU2FnYU1pZGRsZXdhcmUgfSBmcm9tIFwiLi9zdG9yZS5qc1wiO1xudmFyIHJlZHVjZXIgPSBtYWtlUmVkdWNlcigpO1xudmFyIHNhZ2FNaWRkbGV3YXJlID0gbWFrZVNhZ2FNaWRkbGV3YXJlKCk7XG52YXIgc3RvcmUgPSBtYWtlU3RvcmUocmVkdWNlciwgc2FnYU1pZGRsZXdhcmUpO1xucnVuU2FnYU1pZGRsZXdhcmUoc2FnYU1pZGRsZXdhcmUpO1xudmFyIHNjaGVtZSA9IFwid3NcIjtcblxuaWYgKHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbC5zdGFydHNXaXRoKFwiaHR0cHNcIikpIHtcbiAgc2NoZW1lID0gXCJ3c3NcIjtcbn1cblxudmFyIHVybCA9IHNjaGVtZSArIFwiOi8vXCIgKyB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUgKyBcIjpcIiArIFN0cmluZyh3aW5kb3cubG9jYXRpb24ucG9ydCkgKyBcIi92MS93c1wiO1xuXG5mdW5jdGlvbiBtYWluU2FnYSgpIHtcbiAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIG1haW5TYWdhJChfY29udGV4dCkge1xuICAgIHdoaWxlICgxKSB7XG4gICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjtcbiAgICAgICAgICByZXR1cm4gZm9yayhsaXN0ZW4sIHVybCk7XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIF9tYXJrZWQpO1xufVxuXG5zYWdhTWlkZGxld2FyZS5ydW4obWFpblNhZ2EpO1xuUmVhY3RET00ucmVuZGVyKCAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQcm92aWRlciwge1xuICBzdG9yZTogc3RvcmVcbn0sIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFBhZ2UsIG51bGwpKSwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwYWdlXCIpKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///478\n')},64:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PartState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return partsSaga; });\n/* harmony import */ var redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var redux_act__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(23);\n/* harmony import */ var _wsclient_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(46);\nvar _marked = /*#__PURE__*/regeneratorRuntime.mark(wsConnectedSaga),\n    _marked2 = /*#__PURE__*/regeneratorRuntime.mark(changePositionSaga),\n    _marked3 = /*#__PURE__*/regeneratorRuntime.mark(highlightSaga),\n    _marked4 = /*#__PURE__*/regeneratorRuntime.mark(makePartStreamSaga),\n    _marked5 = /*#__PURE__*/regeneratorRuntime.mark(streamProgressSaga),\n    _marked6 = /*#__PURE__*/regeneratorRuntime.mark(partsSaga);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n\n\n\n\nvar combine_parts = function combine_parts(parts, existing) {\n  var by_key = {};\n  existing.map(function (part) {\n    by_key[part.key] = part;\n  });\n  var result = [];\n  var anyDifferent = false;\n  parts.map(function (part) {\n    if (!by_key[part.key]) {\n      by_key[part.key] = {};\n    }\n\n    var nxt = _objectSpread(_objectSpread({}, by_key[part.key]), part);\n\n    var different = false;\n    Object.keys(nxt).map(function (attr) {\n      if (by_key[part.key][attr] != nxt[attr]) {\n        different = true;\n      }\n    });\n\n    if (different) {\n      result.push(nxt);\n      anyDifferent = true;\n    } else {\n      result.push(by_key[part.key]);\n    }\n  });\n\n  if (anyDifferent) {\n    return result;\n  } else {\n    return existing;\n  }\n};\n\nvar PartsStateKls = /*#__PURE__*/function () {\n  function PartsStateKls() {\n    _classCallCheck(this, PartsStateKls);\n\n    this.Error = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Failed to interact with the server", function (_ref) {\n      var namespace = _ref.namespace,\n          error = _ref.error,\n          error_code = _ref.error_code,\n          reason = _ref.reason,\n          original = _ref.original;\n\n      if (!reason) {\n        reason = original.type.substr(original.type.indexOf("] ") + 2);\n\n        if (original.reason) {\n          reason = original.reason;\n        }\n      }\n\n      reason = "".concat(error_code, ": Failure while ").concat(reason);\n\n      if (typeof error !== "string" && !(error instanceof String)) {\n        error = JSON.stringify(error);\n      }\n\n      return {\n        namespace: namespace,\n        reason: reason,\n        error: error,\n        original: original\n      };\n    });\n    this.ClearError = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Clear error");\n    this.MakeStream = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Make a stream");\n    this.StartedStream = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Started a stream", function (messageId) {\n      return {\n        messageId: messageId\n      };\n    });\n    this.LoadingStream = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Loading a stream");\n    this.StreamProgress = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Progress from a stream");\n    this.Highlight = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("highlight a part", function (serial, part_number) {\n      return {\n        serial: serial,\n        part_number: part_number\n      };\n    });\n    this.GotParts = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Got parts");\n    this.ChangePosition = Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createAction */ "a"])("Change Position");\n  }\n\n  _createClass(PartsStateKls, [{\n    key: "reducer",\n    value: function reducer() {\n      var _createReducer;\n\n      return Object(redux_act__WEBPACK_IMPORTED_MODULE_1__[/* createReducer */ "b"])((_createReducer = {}, _defineProperty(_createReducer, this.Error, function (state, error) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          error: error\n        });\n      }), _defineProperty(_createReducer, this.ClearError, function (state, _) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          error: undefined\n        });\n      }), _defineProperty(_createReducer, this.StartedStream, function (state, _ref2) {\n        var messageId = _ref2.messageId;\n        return _objectSpread(_objectSpread({}, state), {}, {\n          loading: false,\n          messageId: messageId\n        });\n      }), _defineProperty(_createReducer, _wsclient_js__WEBPACK_IMPORTED_MODULE_2__[/* WSState */ "b"].Error, function (state, _) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          loading: false,\n          parts: []\n        });\n      }), _defineProperty(_createReducer, this.LoadingStream, function (state, _) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          loading: true,\n          error: undefined,\n          parts: [],\n          messageId: undefined\n        });\n      }), _defineProperty(_createReducer, this.GotParts, function (state, parts) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          parts: combine_parts(parts, state.parts),\n          waiting: false\n        });\n      }), _createReducer), {\n        parts: [],\n        error: undefined,\n        waiting: true,\n        loading: false,\n        messageId: undefined\n      });\n    }\n  }]);\n\n  return PartsStateKls;\n}();\n\nvar PartState = new PartsStateKls();\n\nfunction wsConnectedSaga() {\n  return regeneratorRuntime.wrap(function wsConnectedSaga$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(PartState.MakeStream());\n\n        case 2:\n        case "end":\n          return _context.stop();\n      }\n    }\n  }, _marked);\n}\n\nfunction changePositionSaga(original) {\n  var messageId;\n  return regeneratorRuntime.wrap(function changePositionSaga$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* select */ "h"])(function (state) {\n            return state.parts.messageId;\n          });\n\n        case 2:\n          messageId = _context2.sent;\n\n          if (messageId) {\n            _context2.next = 5;\n            break;\n          }\n\n          return _context2.abrupt("return");\n\n        case 5:\n          _context2.next = 7;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(Object(_wsclient_js__WEBPACK_IMPORTED_MODULE_2__[/* WSCommand */ "a"])("/v1/lifx/command", {\n            command: "change_position",\n            args: original.payload\n          }, {\n            onerror: PartState.Error,\n            original: original,\n            parentMessageIds: [messageId]\n          }));\n\n        case 7:\n        case "end":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nfunction highlightSaga(original) {\n  var messageId;\n  return regeneratorRuntime.wrap(function highlightSaga$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* select */ "h"])(function (state) {\n            return state.parts.messageId;\n          });\n\n        case 2:\n          messageId = _context3.sent;\n\n          if (messageId) {\n            _context3.next = 5;\n            break;\n          }\n\n          return _context3.abrupt("return");\n\n        case 5:\n          _context3.next = 7;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(Object(_wsclient_js__WEBPACK_IMPORTED_MODULE_2__[/* WSCommand */ "a"])("/v1/lifx/command", {\n            command: "highlight",\n            args: original.payload\n          }, {\n            onerror: PartState.Error,\n            original: original,\n            parentMessageIds: [messageId]\n          }));\n\n        case 7:\n        case "end":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}\n\nfunction makePartStreamSaga(original) {\n  var loading, onsuccess, onerror, onprogress;\n  return regeneratorRuntime.wrap(function makePartStreamSaga$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.next = 2;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* select */ "h"])(function (state) {\n            return state.parts.loading;\n          });\n\n        case 2:\n          loading = _context4.sent;\n\n          if (!loading) {\n            _context4.next = 5;\n            break;\n          }\n\n          return _context4.abrupt("return");\n\n        case 5:\n          onsuccess = PartState.LoadingStream;\n          onerror = PartState.Error;\n          onprogress = PartState.StreamProgress;\n          _context4.next = 10;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(PartState.LoadingStream());\n\n        case 10:\n          _context4.next = 12;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(Object(_wsclient_js__WEBPACK_IMPORTED_MODULE_2__[/* WSCommand */ "a"])("/v1/lifx/command", {\n            command: "parts/store"\n          }, {\n            onsuccess: onsuccess,\n            onprogress: onprogress,\n            onerror: onerror,\n            original: original\n          }));\n\n        case 12:\n        case "end":\n          return _context4.stop();\n      }\n    }\n  }, _marked4);\n}\n\nfunction streamProgressSaga(command) {\n  var payload, instruction;\n  return regeneratorRuntime.wrap(function streamProgressSaga$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          payload = command.payload;\n\n          if (!payload.progress.error) {\n            _context5.next = 5;\n            break;\n          }\n\n          _context5.next = 4;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(PartState.Error(_objectSpread(_objectSpread({}, payload.progress), {}, {\n            original: {\n              type: "[] processing device discovery"\n            }\n          })));\n\n        case 4:\n          return _context5.abrupt("return");\n\n        case 5:\n          instruction = payload.progress.instruction;\n\n          if (!(instruction == "started")) {\n            _context5.next = 11;\n            break;\n          }\n\n          _context5.next = 9;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(PartState.StartedStream(payload.messageId));\n\n        case 9:\n          _context5.next = 14;\n          break;\n\n        case 11:\n          if (!(instruction == "parts")) {\n            _context5.next = 14;\n            break;\n          }\n\n          _context5.next = 14;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* put */ "f"])(PartState.GotParts(payload.progress.parts));\n\n        case 14:\n        case "end":\n          return _context5.stop();\n      }\n    }\n  }, _marked5);\n}\n\nfunction partsSaga() {\n  return regeneratorRuntime.wrap(function partsSaga$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* takeEvery */ "k"])(PartState.StreamProgress, streamProgressSaga);\n\n        case 2:\n          _context6.next = 4;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* takeEvery */ "k"])(PartState.Highlight, highlightSaga);\n\n        case 4:\n          _context6.next = 6;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* takeEvery */ "k"])(PartState.ChangePosition, changePositionSaga);\n\n        case 6:\n          _context6.next = 8;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* takeLatest */ "l"])(PartState.MakeStream, makePartStreamSaga);\n\n        case 8:\n          _context6.next = 10;\n          return Object(redux_saga_effects__WEBPACK_IMPORTED_MODULE_0__[/* takeLatest */ "l"])(_wsclient_js__WEBPACK_IMPORTED_MODULE_2__[/* WSState */ "b"].Connected, wsConnectedSaga);\n\n        case 10:\n        case "end":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9qcy9zdGF0ZS5qcz9lNDkzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfbWFya2VkID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKHdzQ29ubmVjdGVkU2FnYSksXG4gICAgX21hcmtlZDIgPSAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoY2hhbmdlUG9zaXRpb25TYWdhKSxcbiAgICBfbWFya2VkMyA9IC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhoaWdobGlnaHRTYWdhKSxcbiAgICBfbWFya2VkNCA9IC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhtYWtlUGFydFN0cmVhbVNhZ2EpLFxuICAgIF9tYXJrZWQ1ID0gLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKHN0cmVhbVByb2dyZXNzU2FnYSksXG4gICAgX21hcmtlZDYgPSAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsocGFydHNTYWdhKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxuaW1wb3J0IHsgdGFrZUV2ZXJ5LCBzZWxlY3QsIHRha2VMYXRlc3QsIHB1dCB9IGZyb20gXCJyZWR1eC1zYWdhL2VmZmVjdHNcIjtcbmltcG9ydCB7IGNyZWF0ZUFjdGlvbiwgY3JlYXRlUmVkdWNlciB9IGZyb20gXCJyZWR1eC1hY3RcIjtcbmltcG9ydCB7IFdTU3RhdGUsIFdTQ29tbWFuZCB9IGZyb20gXCIuL3dzY2xpZW50LmpzXCI7XG5cbnZhciBjb21iaW5lX3BhcnRzID0gZnVuY3Rpb24gY29tYmluZV9wYXJ0cyhwYXJ0cywgZXhpc3RpbmcpIHtcbiAgdmFyIGJ5X2tleSA9IHt9O1xuICBleGlzdGluZy5tYXAoZnVuY3Rpb24gKHBhcnQpIHtcbiAgICBieV9rZXlbcGFydC5rZXldID0gcGFydDtcbiAgfSk7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgdmFyIGFueURpZmZlcmVudCA9IGZhbHNlO1xuICBwYXJ0cy5tYXAoZnVuY3Rpb24gKHBhcnQpIHtcbiAgICBpZiAoIWJ5X2tleVtwYXJ0LmtleV0pIHtcbiAgICAgIGJ5X2tleVtwYXJ0LmtleV0gPSB7fTtcbiAgICB9XG5cbiAgICB2YXIgbnh0ID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBieV9rZXlbcGFydC5rZXldKSwgcGFydCk7XG5cbiAgICB2YXIgZGlmZmVyZW50ID0gZmFsc2U7XG4gICAgT2JqZWN0LmtleXMobnh0KS5tYXAoZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIGlmIChieV9rZXlbcGFydC5rZXldW2F0dHJdICE9IG54dFthdHRyXSkge1xuICAgICAgICBkaWZmZXJlbnQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKGRpZmZlcmVudCkge1xuICAgICAgcmVzdWx0LnB1c2gobnh0KTtcbiAgICAgIGFueURpZmZlcmVudCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdC5wdXNoKGJ5X2tleVtwYXJ0LmtleV0pO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKGFueURpZmZlcmVudCkge1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGV4aXN0aW5nO1xuICB9XG59O1xuXG52YXIgUGFydHNTdGF0ZUtscyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBhcnRzU3RhdGVLbHMoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhcnRzU3RhdGVLbHMpO1xuXG4gICAgdGhpcy5FcnJvciA9IGNyZWF0ZUFjdGlvbihcIkZhaWxlZCB0byBpbnRlcmFjdCB3aXRoIHRoZSBzZXJ2ZXJcIiwgZnVuY3Rpb24gKF9yZWYpIHtcbiAgICAgIHZhciBuYW1lc3BhY2UgPSBfcmVmLm5hbWVzcGFjZSxcbiAgICAgICAgICBlcnJvciA9IF9yZWYuZXJyb3IsXG4gICAgICAgICAgZXJyb3JfY29kZSA9IF9yZWYuZXJyb3JfY29kZSxcbiAgICAgICAgICByZWFzb24gPSBfcmVmLnJlYXNvbixcbiAgICAgICAgICBvcmlnaW5hbCA9IF9yZWYub3JpZ2luYWw7XG5cbiAgICAgIGlmICghcmVhc29uKSB7XG4gICAgICAgIHJlYXNvbiA9IG9yaWdpbmFsLnR5cGUuc3Vic3RyKG9yaWdpbmFsLnR5cGUuaW5kZXhPZihcIl0gXCIpICsgMik7XG5cbiAgICAgICAgaWYgKG9yaWdpbmFsLnJlYXNvbikge1xuICAgICAgICAgIHJlYXNvbiA9IG9yaWdpbmFsLnJlYXNvbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZWFzb24gPSBcIlwiLmNvbmNhdChlcnJvcl9jb2RlLCBcIjogRmFpbHVyZSB3aGlsZSBcIikuY29uY2F0KHJlYXNvbik7XG5cbiAgICAgIGlmICh0eXBlb2YgZXJyb3IgIT09IFwic3RyaW5nXCIgJiYgIShlcnJvciBpbnN0YW5jZW9mIFN0cmluZykpIHtcbiAgICAgICAgZXJyb3IgPSBKU09OLnN0cmluZ2lmeShlcnJvcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlLFxuICAgICAgICByZWFzb246IHJlYXNvbixcbiAgICAgICAgZXJyb3I6IGVycm9yLFxuICAgICAgICBvcmlnaW5hbDogb3JpZ2luYWxcbiAgICAgIH07XG4gICAgfSk7XG4gICAgdGhpcy5DbGVhckVycm9yID0gY3JlYXRlQWN0aW9uKFwiQ2xlYXIgZXJyb3JcIik7XG4gICAgdGhpcy5NYWtlU3RyZWFtID0gY3JlYXRlQWN0aW9uKFwiTWFrZSBhIHN0cmVhbVwiKTtcbiAgICB0aGlzLlN0YXJ0ZWRTdHJlYW0gPSBjcmVhdGVBY3Rpb24oXCJTdGFydGVkIGEgc3RyZWFtXCIsIGZ1bmN0aW9uIChtZXNzYWdlSWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1lc3NhZ2VJZDogbWVzc2FnZUlkXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHRoaXMuTG9hZGluZ1N0cmVhbSA9IGNyZWF0ZUFjdGlvbihcIkxvYWRpbmcgYSBzdHJlYW1cIik7XG4gICAgdGhpcy5TdHJlYW1Qcm9ncmVzcyA9IGNyZWF0ZUFjdGlvbihcIlByb2dyZXNzIGZyb20gYSBzdHJlYW1cIik7XG4gICAgdGhpcy5IaWdobGlnaHQgPSBjcmVhdGVBY3Rpb24oXCJoaWdobGlnaHQgYSBwYXJ0XCIsIGZ1bmN0aW9uIChzZXJpYWwsIHBhcnRfbnVtYmVyKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzZXJpYWw6IHNlcmlhbCxcbiAgICAgICAgcGFydF9udW1iZXI6IHBhcnRfbnVtYmVyXG4gICAgICB9O1xuICAgIH0pO1xuICAgIHRoaXMuR290UGFydHMgPSBjcmVhdGVBY3Rpb24oXCJHb3QgcGFydHNcIik7XG4gICAgdGhpcy5DaGFuZ2VQb3NpdGlvbiA9IGNyZWF0ZUFjdGlvbihcIkNoYW5nZSBQb3NpdGlvblwiKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhQYXJ0c1N0YXRlS2xzLCBbe1xuICAgIGtleTogXCJyZWR1Y2VyXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlZHVjZXIoKSB7XG4gICAgICB2YXIgX2NyZWF0ZVJlZHVjZXI7XG5cbiAgICAgIHJldHVybiBjcmVhdGVSZWR1Y2VyKChfY3JlYXRlUmVkdWNlciA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX2NyZWF0ZVJlZHVjZXIsIHRoaXMuRXJyb3IsIGZ1bmN0aW9uIChzdGF0ZSwgZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICAgIGVycm9yOiBlcnJvclxuICAgICAgICB9KTtcbiAgICAgIH0pLCBfZGVmaW5lUHJvcGVydHkoX2NyZWF0ZVJlZHVjZXIsIHRoaXMuQ2xlYXJFcnJvciwgZnVuY3Rpb24gKHN0YXRlLCBfKSB7XG4gICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgICBlcnJvcjogdW5kZWZpbmVkXG4gICAgICAgIH0pO1xuICAgICAgfSksIF9kZWZpbmVQcm9wZXJ0eShfY3JlYXRlUmVkdWNlciwgdGhpcy5TdGFydGVkU3RyZWFtLCBmdW5jdGlvbiAoc3RhdGUsIF9yZWYyKSB7XG4gICAgICAgIHZhciBtZXNzYWdlSWQgPSBfcmVmMi5tZXNzYWdlSWQ7XG4gICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlSWQ6IG1lc3NhZ2VJZFxuICAgICAgICB9KTtcbiAgICAgIH0pLCBfZGVmaW5lUHJvcGVydHkoX2NyZWF0ZVJlZHVjZXIsIFdTU3RhdGUuRXJyb3IsIGZ1bmN0aW9uIChzdGF0ZSwgXykge1xuICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBzdGF0ZSksIHt9LCB7XG4gICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgcGFydHM6IFtdXG4gICAgICAgIH0pO1xuICAgICAgfSksIF9kZWZpbmVQcm9wZXJ0eShfY3JlYXRlUmVkdWNlciwgdGhpcy5Mb2FkaW5nU3RyZWFtLCBmdW5jdGlvbiAoc3RhdGUsIF8pIHtcbiAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgc3RhdGUpLCB7fSwge1xuICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgZXJyb3I6IHVuZGVmaW5lZCxcbiAgICAgICAgICBwYXJ0czogW10sXG4gICAgICAgICAgbWVzc2FnZUlkOiB1bmRlZmluZWRcbiAgICAgICAgfSk7XG4gICAgICB9KSwgX2RlZmluZVByb3BlcnR5KF9jcmVhdGVSZWR1Y2VyLCB0aGlzLkdvdFBhcnRzLCBmdW5jdGlvbiAoc3RhdGUsIHBhcnRzKSB7XG4gICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHN0YXRlKSwge30sIHtcbiAgICAgICAgICBwYXJ0czogY29tYmluZV9wYXJ0cyhwYXJ0cywgc3RhdGUucGFydHMpLFxuICAgICAgICAgIHdhaXRpbmc6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfSksIF9jcmVhdGVSZWR1Y2VyKSwge1xuICAgICAgICBwYXJ0czogW10sXG4gICAgICAgIGVycm9yOiB1bmRlZmluZWQsXG4gICAgICAgIHdhaXRpbmc6IHRydWUsXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlSWQ6IHVuZGVmaW5lZFxuICAgICAgfSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFBhcnRzU3RhdGVLbHM7XG59KCk7XG5cbmV4cG9ydCB2YXIgUGFydFN0YXRlID0gbmV3IFBhcnRzU3RhdGVLbHMoKTtcblxuZnVuY3Rpb24gd3NDb25uZWN0ZWRTYWdhKCkge1xuICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gd3NDb25uZWN0ZWRTYWdhJChfY29udGV4dCkge1xuICAgIHdoaWxlICgxKSB7XG4gICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjtcbiAgICAgICAgICByZXR1cm4gcHV0KFBhcnRTdGF0ZS5NYWtlU3RyZWFtKCkpO1xuXG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBfbWFya2VkKTtcbn1cblxuZnVuY3Rpb24gY2hhbmdlUG9zaXRpb25TYWdhKG9yaWdpbmFsKSB7XG4gIHZhciBtZXNzYWdlSWQ7XG4gIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBjaGFuZ2VQb3NpdGlvblNhZ2EkKF9jb250ZXh0Mikge1xuICAgIHdoaWxlICgxKSB7XG4gICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjtcbiAgICAgICAgICByZXR1cm4gc2VsZWN0KGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnBhcnRzLm1lc3NhZ2VJZDtcbiAgICAgICAgICB9KTtcblxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgbWVzc2FnZUlkID0gX2NvbnRleHQyLnNlbnQ7XG5cbiAgICAgICAgICBpZiAobWVzc2FnZUlkKSB7XG4gICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdChcInJldHVyblwiKTtcblxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3O1xuICAgICAgICAgIHJldHVybiBwdXQoV1NDb21tYW5kKFwiL3YxL2xpZngvY29tbWFuZFwiLCB7XG4gICAgICAgICAgICBjb21tYW5kOiBcImNoYW5nZV9wb3NpdGlvblwiLFxuICAgICAgICAgICAgYXJnczogb3JpZ2luYWwucGF5bG9hZFxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIG9uZXJyb3I6IFBhcnRTdGF0ZS5FcnJvcixcbiAgICAgICAgICAgIG9yaWdpbmFsOiBvcmlnaW5hbCxcbiAgICAgICAgICAgIHBhcmVudE1lc3NhZ2VJZHM6IFttZXNzYWdlSWRdXG4gICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNhc2UgNzpcbiAgICAgICAgY2FzZSBcImVuZFwiOlxuICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgX21hcmtlZDIpO1xufVxuXG5mdW5jdGlvbiBoaWdobGlnaHRTYWdhKG9yaWdpbmFsKSB7XG4gIHZhciBtZXNzYWdlSWQ7XG4gIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBoaWdobGlnaHRTYWdhJChfY29udGV4dDMpIHtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7XG4gICAgICAgICAgcmV0dXJuIHNlbGVjdChmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5wYXJ0cy5tZXNzYWdlSWQ7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIG1lc3NhZ2VJZCA9IF9jb250ZXh0My5zZW50O1xuXG4gICAgICAgICAgaWYgKG1lc3NhZ2VJZCkge1xuICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoXCJyZXR1cm5cIik7XG5cbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNztcbiAgICAgICAgICByZXR1cm4gcHV0KFdTQ29tbWFuZChcIi92MS9saWZ4L2NvbW1hbmRcIiwge1xuICAgICAgICAgICAgY29tbWFuZDogXCJoaWdobGlnaHRcIixcbiAgICAgICAgICAgIGFyZ3M6IG9yaWdpbmFsLnBheWxvYWRcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBvbmVycm9yOiBQYXJ0U3RhdGUuRXJyb3IsXG4gICAgICAgICAgICBvcmlnaW5hbDogb3JpZ2luYWwsXG4gICAgICAgICAgICBwYXJlbnRNZXNzYWdlSWRzOiBbbWVzc2FnZUlkXVxuICAgICAgICAgIH0pKTtcblxuICAgICAgICBjYXNlIDc6XG4gICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIF9tYXJrZWQzKTtcbn1cblxuZnVuY3Rpb24gbWFrZVBhcnRTdHJlYW1TYWdhKG9yaWdpbmFsKSB7XG4gIHZhciBsb2FkaW5nLCBvbnN1Y2Nlc3MsIG9uZXJyb3IsIG9ucHJvZ3Jlc3M7XG4gIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBtYWtlUGFydFN0cmVhbVNhZ2EkKF9jb250ZXh0NCkge1xuICAgIHdoaWxlICgxKSB7XG4gICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjtcbiAgICAgICAgICByZXR1cm4gc2VsZWN0KGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHN0YXRlLnBhcnRzLmxvYWRpbmc7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgIGxvYWRpbmcgPSBfY29udGV4dDQuc2VudDtcblxuICAgICAgICAgIGlmICghbG9hZGluZykge1xuICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA1O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoXCJyZXR1cm5cIik7XG5cbiAgICAgICAgY2FzZSA1OlxuICAgICAgICAgIG9uc3VjY2VzcyA9IFBhcnRTdGF0ZS5Mb2FkaW5nU3RyZWFtO1xuICAgICAgICAgIG9uZXJyb3IgPSBQYXJ0U3RhdGUuRXJyb3I7XG4gICAgICAgICAgb25wcm9ncmVzcyA9IFBhcnRTdGF0ZS5TdHJlYW1Qcm9ncmVzcztcbiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEwO1xuICAgICAgICAgIHJldHVybiBwdXQoUGFydFN0YXRlLkxvYWRpbmdTdHJlYW0oKSk7XG5cbiAgICAgICAgY2FzZSAxMDpcbiAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDEyO1xuICAgICAgICAgIHJldHVybiBwdXQoV1NDb21tYW5kKFwiL3YxL2xpZngvY29tbWFuZFwiLCB7XG4gICAgICAgICAgICBjb21tYW5kOiBcInBhcnRzL3N0b3JlXCJcbiAgICAgICAgICB9LCB7XG4gICAgICAgICAgICBvbnN1Y2Nlc3M6IG9uc3VjY2VzcyxcbiAgICAgICAgICAgIG9ucHJvZ3Jlc3M6IG9ucHJvZ3Jlc3MsXG4gICAgICAgICAgICBvbmVycm9yOiBvbmVycm9yLFxuICAgICAgICAgICAgb3JpZ2luYWw6IG9yaWdpbmFsXG4gICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNhc2UgMTI6XG4gICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIF9tYXJrZWQ0KTtcbn1cblxuZnVuY3Rpb24gc3RyZWFtUHJvZ3Jlc3NTYWdhKGNvbW1hbmQpIHtcbiAgdmFyIHBheWxvYWQsIGluc3RydWN0aW9uO1xuICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gc3RyZWFtUHJvZ3Jlc3NTYWdhJChfY29udGV4dDUpIHtcbiAgICB3aGlsZSAoMSkge1xuICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICBwYXlsb2FkID0gY29tbWFuZC5wYXlsb2FkO1xuXG4gICAgICAgICAgaWYgKCFwYXlsb2FkLnByb2dyZXNzLmVycm9yKSB7XG4gICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7XG4gICAgICAgICAgcmV0dXJuIHB1dChQYXJ0U3RhdGUuRXJyb3IoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwYXlsb2FkLnByb2dyZXNzKSwge30sIHtcbiAgICAgICAgICAgIG9yaWdpbmFsOiB7XG4gICAgICAgICAgICAgIHR5cGU6IFwiW10gcHJvY2Vzc2luZyBkZXZpY2UgZGlzY292ZXJ5XCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSkpO1xuXG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LmFicnVwdChcInJldHVyblwiKTtcblxuICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgaW5zdHJ1Y3Rpb24gPSBwYXlsb2FkLnByb2dyZXNzLmluc3RydWN0aW9uO1xuXG4gICAgICAgICAgaWYgKCEoaW5zdHJ1Y3Rpb24gPT0gXCJzdGFydGVkXCIpKSB7XG4gICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDExO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA5O1xuICAgICAgICAgIHJldHVybiBwdXQoUGFydFN0YXRlLlN0YXJ0ZWRTdHJlYW0ocGF5bG9hZC5tZXNzYWdlSWQpKTtcblxuICAgICAgICBjYXNlIDk6XG4gICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNDtcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDExOlxuICAgICAgICAgIGlmICghKGluc3RydWN0aW9uID09IFwicGFydHNcIikpIHtcbiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDE0O1xuICAgICAgICAgIHJldHVybiBwdXQoUGFydFN0YXRlLkdvdFBhcnRzKHBheWxvYWQucHJvZ3Jlc3MucGFydHMpKTtcblxuICAgICAgICBjYXNlIDE0OlxuICAgICAgICBjYXNlIFwiZW5kXCI6XG4gICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCBfbWFya2VkNSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJ0c1NhZ2EoKSB7XG4gIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBwYXJ0c1NhZ2EkKF9jb250ZXh0Nikge1xuICAgIHdoaWxlICgxKSB7XG4gICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjtcbiAgICAgICAgICByZXR1cm4gdGFrZUV2ZXJ5KFBhcnRTdGF0ZS5TdHJlYW1Qcm9ncmVzcywgc3RyZWFtUHJvZ3Jlc3NTYWdhKTtcblxuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0O1xuICAgICAgICAgIHJldHVybiB0YWtlRXZlcnkoUGFydFN0YXRlLkhpZ2hsaWdodCwgaGlnaGxpZ2h0U2FnYSk7XG5cbiAgICAgICAgY2FzZSA0OlxuICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNjtcbiAgICAgICAgICByZXR1cm4gdGFrZUV2ZXJ5KFBhcnRTdGF0ZS5DaGFuZ2VQb3NpdGlvbiwgY2hhbmdlUG9zaXRpb25TYWdhKTtcblxuICAgICAgICBjYXNlIDY6XG4gICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA4O1xuICAgICAgICAgIHJldHVybiB0YWtlTGF0ZXN0KFBhcnRTdGF0ZS5NYWtlU3RyZWFtLCBtYWtlUGFydFN0cmVhbVNhZ2EpO1xuXG4gICAgICAgIGNhc2UgODpcbiAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDEwO1xuICAgICAgICAgIHJldHVybiB0YWtlTGF0ZXN0KFdTU3RhdGUuQ29ubmVjdGVkLCB3c0Nvbm5lY3RlZFNhZ2EpO1xuXG4gICAgICAgIGNhc2UgMTA6XG4gICAgICAgIGNhc2UgXCJlbmRcIjpcbiAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIF9tYXJrZWQ2KTtcbn0iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///64\n')}});